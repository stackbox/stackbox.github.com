<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[å æ­å®ç®±]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://stackbox.org/"/>
  <updated>2015-05-11T14:51:32.182Z</updated>
  <id>http://stackbox.org/</id>
  
  <author>
    <name><![CDATA[SRK.Lyu]]></name>
    <email><![CDATA[saber@stackbox.org]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[mavenå¤§å‘]]></title>
    <link href="http://stackbox.org/2015/05/dammit-maven/"/>
    <id>http://stackbox.org/2015/05/dammit-maven/</id>
    <published>2015-05-10T16:53:31.000Z</published>
    <updated>2015-05-11T14:50:28.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ä¹±ç ">ä¹±ç </h2>
<p>å†éƒ¨ç½²æŸäº§å“çš„æ—¶å€™, å‡ºç°äº†è¯¡å¼‚çš„ç¼–ç é”™è¯¯,ä¸»è¦ä½“ç°ä¸º:</p>
<ul>
<li>ç™»é™†æäº¤çš„è¡¨å•ä¼šè‡ªåŠ¨åŠ ä¸€ä¸²å¥‡å¥‡æ€ªæ€ªçš„ä¹±ç </li>
<li>Constantå˜é‡ä¸­çš„ä¸­æ–‡åœ¨å½“æˆmessageæ”¾åœ¨jsonä¸­ä¹Ÿä¼šå‡ºç°ä¹±ç </li>
</ul>
<p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯Linuxçš„Localeç¯å¢ƒå˜é‡å¼•èµ·çš„,ä½†æ˜¯æ”¹ä¹‹ä¾ç„¶æ²¡æœ‰æ•ˆæœ,è€Œä»ä¸Šé¢çš„é‚£ä¸ªç¬¬äºŒæ¡å¤§è‡´å¯ä»¥<br>çŒœå‡ºæ˜¯æ–‡ä»¶ç¼–è¯‘çš„æ—¶å€™æŠŠencodingæä¹±äº†ã€‚å› ä¸º@FanFanç«¥é‹ç”¨ç›´æ¥eclipseçš„exportå¯¼å‡ºçš„waræ˜¯å¯ç”¨çš„,é‚£å°±æ˜¯è¯´æ‰“åŒ…çš„æ—¶å€™é”™è¯¯äº†ã€‚</p>
<p>æœ€åçš„è§£å†³æ–¹æ³•æ˜¯: <strong> pom.xmlé…ç½®ç¼–ç æ–¹å¼ </strong></p>
<p>å…ˆé…ç½®:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">properties</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="title">project.build.sourceEncoding</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="title">properties</span>&gt;</span></div></pre></td></tr></table></figure>

<p>ç„¶åå†é…ç½® maven-compiler-plugin</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="title">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="title">source</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="title">target</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="title">encoding</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="title">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></div></pre></td></tr></table></figure>

<h2 id="mybatisä»£ç†å¤±æ•ˆ">mybatisä»£ç†å¤±æ•ˆ</h2>
<p>è¿™ä¸ªé—®é¢˜æ‰¾çš„æ¯”è¾ƒå¿«,å› ä¸ºmybatisæ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¨¡å¼æ¥å®ç°DAOæ¥å£çš„, ä¸€çœ‹åˆ°CGLibå¤±è´¥å°±çŸ¥é“æ¥å£çš„ä»£ç†å‡ºç°äº†é—®é¢˜ã€‚<br>æœä¸å…¶ç„¶ï¼Œåœ¨ç¼–è¯‘çš„ç»“æœé‡Œæ²¡æœ‰æ‰¾åˆ°mybatisçš„xmlã€‚</p>
<p>å¥½å§ï¼Œé¡¹ç›®çš„å…ˆäººæŠŠXMLæ”¾åˆ°äº† <code>src/main/java</code> ä¸‹, è€Œé»˜è®¤ä¼šå¿½ç•¥æ‰è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„é…ç½®æ–‡ä»¶çš„ã€‚è€Œä¸”å…ˆäººè¿˜æ˜¯é€šè¿‡eclipse-&gt;exportå¯¼å‡ºwaråŒ…çš„ï¼Œæ‰€ä»¥å°±æ²¡æœ‰å‘ç°è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>è§£å†³æ–¹æ³•:</p>
<ul>
<li>æ¯”è¾ƒæš´åŠ›çš„æ–¹æ³•æ˜¯æŠŠxml,properties éƒ½æ”¾åˆ°<code>src/main/resources</code>ä¸‹</li>
<li>æœ¬ç€è¾ƒå°‘æ”¹åŠ¨çš„åŸåˆ™,ç»™pom.xmlæ·»åŠ å¦‚ä¸‹é…ç½®</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="tag">&lt;<span class="title">resources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">resource</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="title">directory</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="title">filtering</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">resource</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="title">resource</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="title">directory</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="title">filtering</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">resource</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">resources</span>&gt;</span></div></pre></td></tr></table></figure>

<h2 id="å…¶ä»–">å…¶ä»–</h2>
<p>é…xmlä¸èƒ½éšä¾¿ï¼Œä¸èƒ½éšä¾¿</p>
]]></content>
    
    
      <category term="è½¯ä»¶å·¥ç¨‹" scheme="http://stackbox.org/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[002-Express.jsæ•™ç¨‹-å¸¸ç”¨è½¯ä»¶]]></title>
    <link href="http://stackbox.org/2015/04/express-tutorial-2/"/>
    <id>http://stackbox.org/2015/04/express-tutorial-2/</id>
    <published>2015-04-25T03:34:15.000Z</published>
    <updated>2015-05-03T13:05:16.000Z</updated>
    <content type="html"><![CDATA[<p><link href="http://vjs.zencdn.net/4.12/video-js.css" rel="stylesheet"></p>
<p><script src="http://vjs.zencdn.net/4.12/video.js"></script><br>Express.jsç³»åˆ—æ•™ç¨‹ ç¬¬äºŒè®²</p>
<ul>
<li>æˆ‘ä¹Ÿä¸çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆç³»åˆ—ï½ï½ï½å¾·äº‘ç¤¾å¸ˆå‚…å¿«æ”¶äº†æˆ‘</li>
</ul>
<video class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto" width="770" height="542" data-setup="{}"><br>      <source src="http://srkbox-images.qiniudn.com/node-tutorialexpress-tutorial-2.1.mp4" type="video/mp4"><br></video>
]]></content>
    
    
      <category term="Node.js" scheme="http://stackbox.org/tags/Node-js/"/>
    
      <category term="Express.js" scheme="http://stackbox.org/tags/Express-js/"/>
    
      <category term="è§†é¢‘æ•™ç¨‹" scheme="http://stackbox.org/categories/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[001-Express.jsæ•™ç¨‹-åŸºç¡€éƒ¨åˆ†]]></title>
    <link href="http://stackbox.org/2015/04/express-tutorial-1/"/>
    <id>http://stackbox.org/2015/04/express-tutorial-1/</id>
    <published>2015-04-24T03:34:14.000Z</published>
    <updated>2015-04-26T10:06:51.000Z</updated>
    <content type="html"><![CDATA[<p><link href="http://vjs.zencdn.net/4.12/video-js.css" rel="stylesheet"></p>
<p><script src="http://vjs.zencdn.net/4.12/video.js"></script><br>Express.jsç³»åˆ—æ•™ç¨‹ ç¬¬ä¸€è®²</p>
<ul>
<li>ç¼–è¯‘å®‰è£…<br>NOTE: winå¹³å°ä¸‹ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶åŒ…å³å¯</li>
</ul>
<video class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto" width="770" height="542" data-setup="{}"><br>      <source src="http://srkbox-images.qiniudn.com/node-tutorialinstall-node.mp4" type="video/mp4"><br></video>

<ul>
<li>Expressåˆä½“éªŒ<br>NOTE: è¿™ä¸€å¼¹å£åƒä¸æ¸…äº†ã€‚ã€‚</li>
</ul>
<video class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto" width="770" height="542" data-setup="{}"><br>      <source src="http://srkbox-images.qiniudn.com/node-tutorialnode-tutorial-1.2.mp4" type="video/mp4"><br></video>
]]></content>
    
    
      <category term="Node.js" scheme="http://stackbox.org/tags/Node-js/"/>
    
      <category term="Express.js" scheme="http://stackbox.org/tags/Express-js/"/>
    
      <category term="è§†é¢‘æ•™ç¨‹" scheme="http://stackbox.org/categories/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[æŸå¯è§†åŒ–äº§å“äº¤æµå¿ƒå¾—]]></title>
    <link href="http://stackbox.org/2015/03/marketing-thinking/"/>
    <id>http://stackbox.org/2015/03/marketing-thinking/</id>
    <published>2015-03-24T11:44:25.000Z</published>
    <updated>2015-04-19T18:09:07.000Z</updated>
    <content type="html"><![CDATA[<p>è¿™æ¬¡çš„äº§å“äº¤æµä¸»è¦æ˜¯å’Œå¸‚åœºäººå‘˜è¿›è¡Œè®¨è®º,æ”¶è·äº†ä¸€äº›å¾ˆå¥½çš„è§‚ç‚¹</p>
<p>æ ¸å¿ƒæ€è·¯: è¿™ä¸ªåŠŸèƒ½èƒ½ç»™ç”¨æˆ·å¸¦æ¥ä»€ä¹ˆï¼Ÿ å…·ä½“çš„éœ€æ±‚ç»†èŠ‚å¦‚ä¸‹</p>
<ul>
<li>æ¯ä¸ªåœ°åŸŸçš„æ›å…‰ä¸ç”¨å¤ªè¿‡æ˜ç»†ï¼Œåˆ°çœä»½å³å¯ï¼Œè€Œå‡ºäº†å…·ä½“ç‚¹æ›å…‰é‡å¤–ï¼Œåª’ä½“æ›´æƒ³çŸ¥é“çš„æ˜¯<big>æ¯ä¸ªåœ°åŸŸè¿˜å‰©å¤šå°‘åº“å­˜</big>ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ–æ˜ç‚¹</li>
<li>æ›å…‰é‡ç­‰ä¿¡æ¯æ˜¯åª’ä½“çš„æ ¸å¿ƒè¿è¥ä¿¡æ¯ï¼Œè¿™ç‚¹æœ€å¥½ä¸è¦é€éœ²ï¼Œç”¨ç›¸å¯¹é‡çš„ä¼˜ç‚¹æ˜¯èƒ½å®Œæˆæ•°æ®æ´—ç™½ï¼Œé¡ºä¾¿å¯ä»¥å»ºç«‹ä¸€ä¸ªXXæ¦œ,è¿™ç‚¹å¯¹åª’ä½“æ¥è¯´å¾ˆæœ‰å¸å¼•åŠ›</li>
<li>ç›®å‰æ¥è®²ï¼Œåˆ†å±æ¯”åˆ†åœ°åŸŸé‡è¦çš„å¤š, è€Œä¸”å…³é”®ç‚¹è¿˜æ˜¯å¦‚ä½•å®Œå¥½ â€œåº“å­˜ä¸ä¼˜åŒ–â€ è¿™ä¸ªæ¦‚å¿µ</li>
<li>UIä¸Šä¸è¦å¤ªæ··ä¹±ï¼Œç›®å‰é¡¹ç›®çš„è¿™ç§è®¾è®¡çœ‹èµ·æ¥æ¯ä¸ªæŠ¥è¡¨æ—¶å¹³ç­‰çš„ï¼ŒåŠŸèƒ½å…¨é¢ï¼Œä½†æ˜¯ä¼šç»™äººä¸€ç§æ··ä¹±æ„Ÿï¼Œå¹¶ä¸”æ— æ³•æŠ“ä½é‡ç‚¹ï¼Œç•¥åƒé¸¡è‚‹</li>
<li>æ•°æ®å¯è§†åŒ–çš„å®è´¨æ˜¯ï¼šå¦‚ä½•ç”¨ç°æœ‰æ•°æ®è¿›è¡Œå¤„ç†ï¼ŒæŒ–æ˜ï¼Œå»ºç«‹æŸç§æœ‰æ•ˆçš„æ¨¡å‹ï¼Œä»¥ç»´åº¦ä¸€äºŒä¸‰æ¥è¿›è¡Œæœ‰æ•ˆçš„æ€è€ƒå’Œå†³ç­–ã€‚</li>
<li>å®¢æˆ·è‡ªå·±ä¼šæœ‰ä¸€ä¸ªè±¡é™ï¼ˆäººç¾¤ï¼Œå†…å®¹ï¼Œå®¢æˆ·ç»“æ„ï¼‰ï¼Œç„¶åäº§å“ä¹Ÿä¼šæœ‰ä¸€ä¸ªè±¡é™ï¼Œä¸¤ä¸ªè±¡é™è¶Šç›¸è¿‘è¶Šå¥½</li>
<li>æ²¡æœ‰kpiä¹Ÿè¦ä¸ºå®¢æˆ·è®¾ç«‹kpi (ç«äº‰kpiï¼Œè¿è¥kpiç­‰ç­‰)ï¼Œè¿™ä¸€ç‚¹å…·ä½“æ“ä½œè¿˜æ²¡æœ‰å¤ªæ˜ç™½</li>
<li>å¯¹äºåª’ä½“æ¥è®²ï¼Œæ¯”è¾ƒé‡è¦çš„ä¿¡æ¯æ˜¯UserInfo,è¿è¥æ•°æ®,ç»è¥æ•°æ®,è‡ªå·±å’Œè¡Œä¸šçš„æ•°æ®ç­‰ç­‰,ç›®å‰äº§å“å¯¹è¿™äº›ç‚¹çš„æŒ–æ˜è¿˜æ˜¯å¤ªè¿‡è‚¤æµ…äº†</li>
</ul>
<p>ä¹‹åæœ‰æ—¶é—´çš„è¯å¤§æ¦‚ä¼šç”»ä¸€ä¸ªåŸå‹å‡ºæ¥ ï½ï½ğŸ˜</p>
]]></content>
    
    
      <category term="äº§å“" scheme="http://stackbox.org/tags/%E4%BA%A7%E5%93%81/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Chordç®—æ³•]]></title>
    <link href="http://stackbox.org/2015/02/chord-algorithm/"/>
    <id>http://stackbox.org/2015/02/chord-algorithm/</id>
    <published>2015-02-09T16:53:31.000Z</published>
    <updated>2015-04-18T17:09:04.000Z</updated>
    <content type="html"><![CDATA[<p>åœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­,å¦‚ä½•å¿«é€ŸæŸ¥æ‰¾å­˜å‚¨æœ‰æŸæ®µæ•°æ®çš„èŠ‚ç‚¹æ˜¯æœ€æ ¸å¿ƒçš„é—®é¢˜ä¹‹ä¸€,Chordç®—æ³•å°±æ˜¯è§£å†³æ­¤ç±»é—®é¢˜çš„æ–¹æ³•ä¹‹ä¸€</p>
<p><a id="more"></a></p>
<h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2>
<h3 id="è¦†ç›–ç½‘ç»œ(overlaynetwork)">è¦†ç›–ç½‘ç»œ(overlaynetwork)</h3>
<p>è¦†ç›–ç½‘ç»œæ˜¯è¿™ä¹ˆä¸€ç§ç½‘ç»œ:æ„å»ºåœ¨å…¶ä»–ç½‘ç»œä¹‹ä¸Šã€ç½‘ç»œèŠ‚ç‚¹ä¹‹é—´é€šè¿‡è™šæ‹Ÿæˆ–é€»è¾‘è¿æ¥åœ¨ä¸€èµ·ï¼Œæ¯”å¦‚äº‘è®¡ç®—ã€åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½æ˜¯è¦†ç›–ç½‘ç»œï¼Œå› ä¸ºå…¶éƒ½æ„å»ºäºTCP/IPä¹‹ä¸Šï¼Œä¸”èŠ‚ç‚¹ä¹‹é—´æœ‰è”ç³»ã€‚</p>
<h3 id="ç»“æ„åŒ–ç½‘ç»œ">ç»“æ„åŒ–ç½‘ç»œ</h3>
<p>ä¼ ç»Ÿçš„éç»“æ„åŒ–ç½‘ç»œ,èŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´ä¸å­˜åœ¨ç»„ç»‡å…³ç³»,å…¶æŸ¥æ‰¾ç®—æ³•ä¸€èˆ¬æœ‰å¦‚ä¸‹å‡ ç§:</p>
<ol>
<li>Napster: ä½¿ç”¨ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨å¤„ç†æ‰€æœ‰çš„æŸ¥è¯¢è¯·æ±‚,ä¸­å¿ƒæœåŠ¡å™¨æŒ‚æ‰æ•´ä¸ªæœåŠ¡å°±æŒ‚æ‰äº†<br><img src="/image/chord/napster.png" alt=""></li>
<li>Gnutella: ä½¿ç”¨æ¶ˆæ¯æ´ªæ³›å®šä½æ•°æ®,æŸ¥è¯¢æ¶ˆæ¯å‘é€åˆ°æ¯ä¸ªèŠ‚ç‚¹,ä¸€èˆ¬ä¼šä½¿ç”¨TTLæ¥é™åˆ¶æ¶ˆæ¯çš„è½¬å‘æ¬¡æ•°,ä½†æ˜¯å½“ç½‘ç»œè§„æ¨¡<br>è¾ƒå¤§æ—¶ç½‘ç»œè´Ÿè½½ä¼šå˜å¤§.<br><img src="/image/chord/gnutella.png" alt=""></li>
<li>SNå‹: å³è¶…çº§èŠ‚ç‚¹,å’ŒNapsteræ—¶åˆ†ç±»ä¼¼,ä¸è¿‡åœ¨æ•´ä¸ªç½‘ç»œä¸­æœ‰å¤šä¸ªä¸­å¿ƒèŠ‚ç‚¹,ç´¢å¼•æ¶ˆæ¯ä¼šåœ¨è¿™äº›SNä¸­è¿›è¡Œä¼ æ’­,ä¸è¿‡ä¾ç„¶å¯èƒ½ç³»ç»Ÿå´©æºƒ</li>
</ol>
<h3 id="DHT">DHT</h3>
<h2 id="ç®—æ³•æ¦‚è¿°">ç®—æ³•æ¦‚è¿°</h2>
<h3 id="Chordç¯æ„é€ ">Chordç¯æ„é€ </h3>
<ol>
<li>å‡è®¾å­˜åœ¨ä¸€ä¸ªæœ€å¤§å®¹é‡ä¸º $x_mu$  çš„ç¯å½¢ç½‘ç»œ,æˆ‘ä»¬å‡è®¾ä»¥Kä»£è¡¨èµ„æº,Nä»£è¡¨èŠ‚ç‚¹,IDè¡¨ç¤ºæŠ½è±¡ç¯å½¢ç½‘ç»œä¸­çš„æ ‡è¯†ç¬¦<br><img src="/image/chord/chord1.png" alt=""></li>
<li><strong>ID(Node) = hash(IP,Port)</strong>, å°†Nodeæ•£åˆ—åœ¨Chordç¯ä¸­,ä¸€èˆ¬é€‰ç”¨ hash-1ç®—æ³•<br><img src="/image/chord/chord2.png" alt=""> </li>
<li>ä¹‹åå¼€å§‹å¯¹èµ„æºèŠ‚ç‚¹è¿›è¡Œæ•£åˆ— <strong>ID(Key) = hash(Key)</strong>,å¯¹äºK1æ¥è¯´, ID(1)ä¸ä»…æ˜¯ä¸ªæ ‡è¯†ç¬¦,è€Œä¸”æœ‰èŠ‚ç‚¹å­˜åœ¨,æ‰€ä»¥K1å°±æ”¾åœ¨äº†ID(1)ä¸Š<br><img src="/image/chord/chord4.png" alt=""></li>
<li>å¯¹äºK2æ¥è¯´,K2åªæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦,ä¸å­˜åœ¨èŠ‚ç‚¹,ID(2)çš„ç»§æ‰¿èŠ‚ç‚¹æ˜¯ID(3),æ‰€ä»¥K2æ”¾åœ¨äº†ID(3)ä¸Š<br><img src="/image/chord/chord6.png" alt=""></li>
<li>åŒç†,K6æœ¬åº”è¯¥åœ¨èŠ‚ç‚¹ID(6)ä¸Š,ä½†æ˜¯ID(6)ä¸å­˜åœ¨èŠ‚ç‚¹ä¸”å…¶ç»§æ‰¿èŠ‚ç‚¹æ˜¯ID(0),æ‰€ä»¥K6æ”¾åœ¨äº†ID(0)ä¸Š<br><img src="/image/chord/chord7.png" alt=""></li>
</ol>
<h3 id="Fingerè·¯ç”±è¡¨">Fingerè·¯ç”±è¡¨</h3>
<h3 id="èŠ‚ç‚¹æŸ¥æ‰¾">èŠ‚ç‚¹æŸ¥æ‰¾</h3>
<ol>
<li>è¿‘ä¼¼äºŒåˆ†æŸ¥æ‰¾</li>
<li>ç›´åˆ°æ‰¾åˆ°èµ„æºä¸ºæ­¢</li>
</ol>
<h3 id="èŠ‚ç‚¹åŠ å…¥">èŠ‚ç‚¹åŠ å…¥</h3>
<ol>
<li>åŠ å…¥æŸèŠ‚ç‚¹N(n)å,æ„é€ Fingerè·¯ç”±è¡¨</li>
<li>å¦‚æœå­˜åœ¨K(n),åˆ™å°†K(n)ä»å…¶ä»–èŠ‚ç‚¹è½¬ç§»åˆ°N(n)</li>
<li>å…¶ä»–èŠ‚ç‚¹çš„Fingerè·¯ç”±è¡¨ä¸­,å¦‚æŸèŠ‚ç‚¹çš„Successorä¸ºN(n)çš„Successor,åˆ™é‡æ–°æŒ‡å‘ä¸ºN(n)</li>
</ol>
<h3 id="èŠ‚ç‚¹é€€å‡º">èŠ‚ç‚¹é€€å‡º</h3>
<ol>
<li>æŸèŠ‚ç‚¹N(n)é€€å‡ºæ—¶, å…ˆå°†å®ƒæ‰€æœ‰çš„èµ„æºéƒ½è½¬ç§»åˆ°è¯¥èŠ‚ç‚¹çš„Successorä¸­</li>
<li>åˆ é™¤èŠ‚ç‚¹</li>
<li>å…¶ä»–èŠ‚ç‚¹çš„Fingerè·¯ç”±è¡¨ä¸­,è‹¥æŸèŠ‚ç‚¹çš„Successorä¸ºN(n),åˆ™é‡æ–°æŒ‡å‘ä¸ºN(n)çš„Successor</li>
</ol>
<h3 id="èŠ‚ç‚¹å¤±æ•ˆ">èŠ‚ç‚¹å¤±æ•ˆ</h3>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="http://www.yeolar.com/note/2010/04/06/p2p-chord/" target="_blank" rel="external">ç»“æ„åŒ–P2Pç½‘ç»œchordç®—æ³•ç ”ç©¶ä¸åˆ†æ</a></li>
<li><a href="http://www.cs.berkeley.edu/~kubitron/courses/cs294-4-F03/slides/lec03-chord.ppt" target="_blank" rel="external">Chord slide of berkeley</a></li>
<li><a href="http://pdos.csail.mit.edu/papers/chord:sigcomm01/chord_sigcomm.pdf" target="_blank" rel="external">Chord sigcomm</a></li>
<li><a href="http://blog.csdn.net/chen77716/article/details/6059575" target="_blank" rel="external">Chordç®—æ³•ï¼ˆåŸç†ï¼‰</a></li>
<li><a href="http://blog.csdn.net/wangxiaoqin00007/article/details/7374833" target="_blank" rel="external">Chordç®—æ³•è¯¦è§£</a></li>
</ol>
]]></content>
    <summary type="html"><![CDATA[<p>åœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­,å¦‚ä½•å¿«é€ŸæŸ¥æ‰¾å­˜å‚¨æœ‰æŸæ®µæ•°æ®çš„èŠ‚ç‚¹æ˜¯æœ€æ ¸å¿ƒçš„é—®é¢˜ä¹‹ä¸€,Chordç®—æ³•å°±æ˜¯è§£å†³æ­¤ç±»é—®é¢˜çš„æ–¹æ³•ä¹‹ä¸€</p>
<p>]]></summary>
    
      <category term="ç®—æ³•" scheme="http://stackbox.org/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="åˆ†å¸ƒå¼" scheme="http://stackbox.org/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Build Your Own Cas Service - Pro]]></title>
    <link href="http://stackbox.org/2015/01/build-your-own-cas-service-pro/"/>
    <id>http://stackbox.org/2015/01/build-your-own-cas-service-pro/</id>
    <published>2015-01-06T05:21:17.000Z</published>
    <updated>2015-04-18T17:04:11.000Z</updated>
    <content type="html"><![CDATA[<p>ç¤ºä¾‹ä»£ç : <a href="https://github.com/superalsrk/modify-jasig-cas" target="_blank" rel="external">https://github.com/superalsrk/modify-jasig-cas</a> ,ä»¥ä¸‹æ‰€æœ‰æè¿°éƒ½åŸºäºç‰ˆæœ¬ <a href="http://mvnrepository.com/artifact/org.jasig.cas/cas-server-core/3.5.2.1" target="_blank" rel="external">3.5.2.1</a></p>
<a id="more"></a>

<h2 id="Generally_Design">Generally Design</h2>
<p>æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªwaré¡¹ç›®ä½œä¸ºdependencyï¼Œç„¶ååˆ›å»ºä¸€ä¸ªwebé¡¹ç›®webappï¼Œç„¶ååªè¦å°†åˆ›å»ºé¡¹ç›®çš„ web.xml å’Œ index.jsp å»æ‰, æ•´ä¸ªé¡¹ç›®å°±èƒ½è·‘äº†ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœè¦å¯¹warè¿›è¡Œæ‰©å±•, åªè¦è®²warå¯¹åº”çš„æ–‡ä»¶æ‹·è´ä¸€ä»½åˆ°webappï¼Œæ‰“åŒ…çš„æ—¶å€™ä¾¿èƒ½è‡ªåŠ¨åˆ°æ›¿æ¢ã€‚ä¸‹é¢è®²çš„ <strong>ä¿®æ”¹XXXæ–‡ä»¶</strong>, éƒ½æ˜¯å¯¹å…¶æ‹·è´è¿›è¡Œä¿®æ”¹,ç‰¹æ­¤å£°æ˜:</p>
<p>webapp moduleçš„pomä¸º<a href="https://github.com/superalsrk/modify-jasig-cas/blob/master/webapp/pom.xml" target="_blank" rel="external">pom.xml</a></p>
<h2 id="Auth_Module">Auth Module</h2>
<h3 id="è‡ªå®šä¹‰Credentials">è‡ªå®šä¹‰Credentials</h3>
<p>Credentialsæ˜¯ä¸€ä¸ªç”¨æˆ·å‡­è¯, å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç®€æ˜“çš„pojo, åªè¦å®ç°Credentialsæ¥å£å³å¯ï¼Œæˆ‘ä»¬çš„è‡ªå®šä¹‰å‡­è¯ä¸­é™¤äº†ç”¨æˆ·åå¯†ç ï¼Œè¿˜åŠ äº†ä¸€ä¸ªå­—æ®µ product : String, è¡¨æ˜è¦ç™»å½•çš„äº§å“ç±»å‹</p>
<p>åœ¨Web Moduleä¸­ï¼Œéœ€è¦è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹</p>
<p>1 . åœ¨ç™»å½•è¡¨å•å¢åŠ productå­—æ®µ,å…·ä½“æ“ä½œè¯¦è§ä¸‹ä¸ªSection<br>2 . åœ¨ /WEB-INF/login-webflow.xml ä¸­,ä¿®æ”¹credentialsç±»å‹ä¸ºè‡ªå®šä¹‰çš„Credentials</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">var</span> name=<span class="string">"credentials"</span> <span class="keyword">class</span>=<span class="string">"com.nbrc.sso.cas.principal.NbrcCredentials"</span>/&gt;</div></pre></td></tr></table></figure>

<p>3 . ç„¶åç»§ç»­åœ¨ login-webflow.xmlé‡Œæ‰¾åˆ° viewLoginForm ,è¿›è¡Œæ•°æ®ç»‘å®š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">view-state</span> <span class="attribute">id</span>=<span class="value">"viewLoginForm"</span> <span class="attribute">view</span>=<span class="value">"casLoginView"</span> <span class="attribute">model</span>=<span class="value">"credentials"</span>&gt;</span>  </div><div class="line">       <span class="tag">&lt;<span class="title">binder</span>&gt;</span>  </div><div class="line">           <span class="tag">&lt;<span class="title">binding</span> <span class="attribute">property</span>=<span class="value">"username"</span> /&gt;</span>  </div><div class="line">           <span class="tag">&lt;<span class="title">binding</span> <span class="attribute">property</span>=<span class="value">"password"</span> /&gt;</span>  </div><div class="line">           <span class="tag">&lt;<span class="title">binding</span> <span class="attribute">property</span>=<span class="value">"product"</span>/&gt;</span> <span class="comment">&lt;!--å¢åŠ è¿™ä¸€è¡Œ --&gt;</span>  </div><div class="line">       <span class="tag">&lt;/<span class="title">binder</span>&gt;</span>  </div><div class="line">       ...  </div><div class="line"><span class="tag">&lt;/<span class="title">view-state</span>&gt;</span></div></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰Handler">è‡ªå®šä¹‰Handler</h3>
<p>è‡ªå®šä¹‰Handleråªè¦å®ç°æ¥å£ AuthenticationHandler å³å¯</p>
<p>1 . å¦‚æœè¦åœ¨å‰å°æ˜¾ç¤ºä¸€ä¸ª æƒé™ä¸è¶³ çš„ä¿¡æ¯, åªéœ€åœ¨Handleré‡Œthrowä¸€ä¸ªè‡ªå®šä¹‰çš„ AuthenticationException å³å¯<br>2 . support æ¥å£ç”¨æ¥å£°æ˜handleræ˜¯å¦æ”¯æŒæŸç§ç±»å‹çš„å‡­è¯<br>3 . ä¿®æ”¹ /WEB-INF/deployConfigContext.xml ï¼Œè¿›è¡Œhandlerçš„é…ç½®</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;property name=<span class="string">"authenticationHandlers"</span>&gt;</div><div class="line">            &lt;list&gt;</div><div class="line">                &lt;bean</div><div class="line">                    class=<span class="string">"org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"</span> </div><div class="line">                    p:httpClient-<span class="keyword">ref</span>=<span class="string">"httpClient"</span> p:requireSecure=<span class="string">"false"</span> /&gt;</div><div class="line"></div><div class="line">                &lt;bean</div><div class="line">                    class=<span class="string">"com.miaozhen.dashboard.darkportal.mechanism.DarkportalAuthenticationHandler"</span> /&gt;</div><div class="line">            &lt;/list&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰Resolver">è‡ªå®šä¹‰Resolver</h3>
<p>Resolveræ˜¯ä¸€ä¸ªCredentials åˆ° Principalçš„è½¬æ¢å™¨ï¼Œ å…¶ä¸­Principalå…¶å®æ˜¯javaEEä¸­å°±å·²ç»å®šä¹‰å¥½çš„</p>
<p>1 . ä¿®æ”¹ /WEB-INF/deployConfigContext.xml ï¼Œè¿›è¡ŒResolverçš„é…ç½®</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"credentialsToPrincipalResolvers"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">list</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="title">bean</span></span></div><div class="line">                    <span class="attribute">class</span>=<span class="value">"com.miaozhen.dashboard.darkportal.mechanism.DarkportalCredentialsToPrincipalResolver"</span>&gt;</div><div class="line"></div><div class="line">                <span class="tag">&lt;/<span class="title">bean</span>&gt;</span></div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="title">bean</span></span></div><div class="line">                    <span class="attribute">class</span>=<span class="value">"org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver"</span> /&gt;</div><div class="line">            <span class="tag">&lt;/<span class="title">list</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">property</span>&gt;</span></div></pre></td></tr></table></figure>

<p>2 . resolverå¯ä»¥è¿”å›ä¸€ä¸ªPrincipal, ä¸ªäººè§‰å¾—æ¯”è¾ƒå¥½ç”¨çš„æ–¹å¼æ˜¯è¿”å›ä¸€ä¸ª #SimplePrincipal# ,é™¤äº†ç”¨æˆ·çš„userä¿¡æ¯å¤–ï¼Œè¿˜å¯ä»¥è¿”å›ä¸€ä¸ª AttrMapï¼Œä¸è¿‡éœ€è¦å‚è€ƒä¸‹ç« è¿›è¡ŒResolverè§†å›¾çš„ä¿®æ”¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</div><div class="line">map.put(ATTR_USERNAME, mzCredentials.getUsername());</div><div class="line">map.put(ATTR_PASSWORD, mzCredentials.getPassword());</div><div class="line"></div><div class="line">SimplePrincipal simple = <span class="keyword">new</span> SimplePrincipal(mzCredentials.getUsername(), map);</div></pre></td></tr></table></figure>

<h2 id="Web_Module">Web Module</h2>
<h3 id="è‡ªå®šä¹‰ç™»é™†é¡µé¢">è‡ªå®šä¹‰ç™»é™†é¡µé¢</h3>
<p>æ­£å¸¸çš„åšæ³•åº”è¯¥æ˜¯copyä¸€ä»½defaultsæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨resourcesé‡Œcopyå¯¹åº”çš„ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœ€ååœ¨cas.propertiesé‡Œé…ç½®ä¸€ä¸‹ä¸»é¢˜ï¼Œä¸è¿‡ä¸ºäº†çœäº‹ç›´æ¥æ”¹defaultsé‡Œçš„æ–‡ä»¶å°±å¯ä»¥äº†</p>
<p>default/ui/casLoginView.jsp å°±æ˜¯é»˜è®¤çš„ç™»å½•ç•Œé¢ï¼Œå¯ä»¥ç»™formè¡¨å•å¢åŠ å¤šä½™çš„å­—æ®µã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šformè¡¨å•é‡Œè¿˜æœ‰ä¸€å †casè‡ªå¸¦çš„inputï¼Œè¿™ä¸ªåœ¨æ”¹é¡µé¢çš„æ—¶å€™ä¸èƒ½åˆ æ‰ã€‚<br><br></p>
<h3 id="è‡ªå®šä¹‰è¿”å›ç”¨æˆ·ä¿¡æ¯">è‡ªå®šä¹‰è¿”å›ç”¨æˆ·ä¿¡æ¯</h3>
<p>1 . åœ¨resolverä¸­è™½ç„¶è¿”å›äº†æ›´å¤šAttrï¼Œä¸è¿‡é»˜è®¤çš„Resolverè§†å›¾ä¸æ”¯æŒè¿”å›æ›´å¤šå±æ€§ï¼Œéœ€è¦å¯¹ protocol/2.0/casServiceValidationSuccess.jsp é¡µé¢è¿›è¡Œæ‰©å±•.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="vbscript">&lt;%@ page session=<span class="string">"false"</span>%&gt;</span></div><div class="line"><span class="vbscript">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span>%&gt;</span></div><div class="line"><span class="vbscript">&lt;%@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/functions"</span> prefix=<span class="string">"fn"</span>%&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">cas:serviceResponse</span> <span class="attribute">xmlns:cas</span>=<span class="value">'http://www.yale.edu/tp/cas'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">cas:authenticationSuccess</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">cas:user</span>&gt;</span>${fn:escapeXml(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.id)}<span class="tag">&lt;/<span class="title">cas:user</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">c:if</span></span></div><div class="line">            <span class="attribute">test</span>=<span class="value">"${fn:length(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes) &gt; 0}"</span>&gt;</div><div class="line">            <span class="tag">&lt;<span class="title">cas:attributes</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="title">c:forEach</span> <span class="attribute">var</span>=<span class="value">"attr"</span> <span class="attribute">items</span>=<span class="value">"${assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes}"</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="title">cas:${fn:escapeXml(attr.key)}</span>&gt;</span>${fn:escapeXml(attr.value)}<span class="tag">&lt;/<span class="title">cas:${fn:escapeXml(attr.key)}</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;/<span class="title">c:forEach</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;/<span class="title">cas:attributes</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="title">c:if</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">c:if</span> <span class="attribute">test</span>=<span class="value">"${not empty pgtIou}"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">cas:proxyGrantingTicket</span>&gt;</span>${pgtIou}<span class="tag">&lt;/<span class="title">cas:proxyGrantingTicket</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="title">c:if</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">c:if</span> <span class="attribute">test</span>=<span class="value">"${fn:length(assertion.chainedAuthentications) &gt; 1}"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">cas:proxies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="title">c:forEach</span> <span class="attribute">var</span>=<span class="value">"proxy"</span> <span class="attribute">items</span>=<span class="value">"${assertion.chainedAuthentications}"</span> </span></div><div class="line">                    <span class="attribute">varStatus</span>=<span class="value">"loopStatus"</span> <span class="attribute">begin</span>=<span class="value">"0"</span> </div><div class="line">                    <span class="attribute">end</span>=<span class="value">"${fn:length(assertion.chainedAuthentications)-2}"</span> <span class="attribute">step</span>=<span class="value">"1"</span>&gt;</div><div class="line">                    <span class="tag">&lt;<span class="title">cas:proxy</span>&gt;</span>${fn:escapeXml(proxy.principal.id)}<span class="tag">&lt;/<span class="title">cas:proxy</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="title">c:forEach</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="title">cas:proxies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="title">c:if</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">cas:authenticationSuccess</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">cas:serviceResponse</span>&gt;</span></div></pre></td></tr></table></figure>

<p>2 . åœ¨clientç«¯ï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç å°±å¯ä»¥è·å–å¤šä½™å±æ€§</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">AttributePrincipal attribute </span>=<span class="string"> (AttributePrincipal) request.getUserPrincipal();</span></div><div class="line">AttributePrincipal.getName()  å°±æ˜¯ Resolverä¸­è¿”å›çš„SimplePrincipalåå­—</div><div class="line">AttributePrincipal.getAttributes() å°±æ˜¯Resolverä¸­è¿”å›çš„SinmplePrincipalçš„attributes</div></pre></td></tr></table></figure>

<p>3 . æ³¨æ„æŠŠdeployerConfigContext.xmlä¸­ serviceRegistryDaoå…¨éƒ¨åˆ æ‰(cas),<a href="http://www.open-open.com/lib/view/open1329744257937.html" target="_blank" rel="external">å‚è€ƒèµ„æ–™</a></p>
<p><br></p>
<h3 id="CASé€€å‡ºåŠŸèƒ½">CASé€€å‡ºåŠŸèƒ½</h3>
<p>é»˜è®¤çš„JASIGé€€å‡ºæˆåŠŸåä¼šè·³åˆ°ä¸€ä¸ª æ¨å‡ºæˆåŠŸé¡µé¢, ä½†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯é€€å‡ºCASï¼Œå¹¶ä¸”é€€å‡ºå·²ç»ç™»å½•çš„åº”ç”¨, é‚£ä¹ˆå¯ä»¥è¿›è¡Œå¦‚ä¸‹çš„é…ç½®ï¼š</p>
<ol>
<li>å¦‚æœåªæ˜¯é€€å‡ºåº”ç”¨ï¼Œé‚£ä¹ˆåœ¨æ­¤è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œcas-clientåˆä¼šå‘cas-serverç«¯è¿›è¡Œè¯·æ±‚éªŒè¯,ç„¶åè‡ªåŠ¨ç™»å½•,æ‰€ä»¥åŒæ—¶é€€å‡ºcaså’Œåº”ç”¨å³å¯</li>
<li>ä¿®æ”¹ cas-servlet.xml , åœ¨ logoutController çš„beanä¸­å¢åŠ å±æ€§ p:followServiceRedirects=â€trueâ€</li>
<li>å‡å¦‚åº”ç”¨å·²ç»æœ‰ä¸€ä¸ªé€€å‡ºcontrollerï¼Œæ­¤contollerç”¨æ¥æ¸…ç©ºsession,é‚£ä¹ˆé“¾æ¥ <a href="http://cas.example.org/logout?service=http://localhost:8080/logout" target="_blank" rel="external">http://cas.example.org/logout?service=http://localhost:8080/logout</a> ä¾¿å¯ä»¥æ­£å¸¸é€€å‡º</li>
</ol>
]]></content>
    <summary type="html"><![CDATA[<p>ç¤ºä¾‹ä»£ç : <a href="https://github.com/superalsrk/modify-jasig-cas" target="_blank" rel="external">https://github.com/superalsrk/modify-jasig-cas</a> ,ä»¥ä¸‹æ‰€æœ‰æè¿°éƒ½åŸºäºç‰ˆæœ¬ <a href="http://mvnrepository.com/artifact/org.jasig.cas/cas-server-core/3.5.2.1" target="_blank" rel="external">3.5.2.1</a></p>
]]></summary>
    
      <category term="å·¥å…·" scheme="http://stackbox.org/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Build Your Own Cas Service - Basic]]></title>
    <link href="http://stackbox.org/2015/01/build-your-own-cas-service-basic/"/>
    <id>http://stackbox.org/2015/01/build-your-own-cas-service-basic/</id>
    <published>2015-01-06T05:21:16.000Z</published>
    <updated>2015-04-18T17:04:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="é¢„å¤‡çŸ¥è¯†">é¢„å¤‡çŸ¥è¯†</h2>
<p>å…·ä½“çš„CASåè®®è§, <a href="http://stackbox.org/2014/11/SSO-learning/" target="_blank" rel="external">CAS Protocal</a>,æ¥ä¸‹æ¥æˆ‘ä»¬è®²jasigçš„CAS Implementationçš„å‡ ä¸ªé‡è¦çš„ç‚¹ï¼Œä»¥ä¸‹æ‰€æœ‰æè¿°éƒ½åŸºäºç‰ˆæœ¬ <a href="http://mvnrepository.com/artifact/org.jasig.cas/cas-server-core/3.5.2.1" target="_blank" rel="external">3.5.2.1</a><br><a id="more"></a></p>
<p>JASIGæœ‰ä»¥ä¸‹å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ¥å£</p>
<ul>
<li><p><a href="https://github.com/Jasig/cas/blob/v3.5.2.1/cas-server-core/src/main/java/org/jasig/cas/authentication/principal/Credentials.java" target="_blank" rel="external">Credentials</a> ç”¨æˆ·è®¤è¯å‡­è¯, CASçš„é»˜è®¤å‡­è¯åªæœ‰ç”¨æˆ·åå¯†ç ï¼Œæ‰€ä»¥å¦‚æœæƒ³åœ¨è®¤è¯çš„æ—¶å€™é™¤äº†ç”¨æˆ·åå¯†ç å¤–è¿˜è¦éªŒè¯äº§å“ä¿¡æ¯ï¼Œå°±è¦è‡ªå®šä¹‰ä¸€ä¸ªCredentialsäº†ï¼Œä¸‹é¢çš„Handlerå’ŒResolveréƒ½æœ‰ä¸€ä¸ªsupportæ¥å£ï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦æ”¯æŒå¤„ç†æŸç§ç±»å‹çš„Credentials</p>
</li>
<li><p><a href="https://github.com/Jasig/cas/blob/v3.5.2.1/cas-server-core/src/main/java/org/jasig/cas/authentication/handler/AuthenticationHandler.java" target="_blank" rel="external">AuthenticationHandler</a> å‰å°é¡µé¢æäº¤ç™»å½•ä¿¡æ¯åï¼Œæ­¤æ¥å£åˆ¤æ–­ç™»å½•ä¿¡æ¯æ˜¯å¦èƒ½è®¤è¯é€šè¿‡,æ¥å£ä¼šæŠ›å‡ºä¸€ä¸ªAuthenticationExceptionå¼‚å¸¸ï¼Œç”¨ä»¥åœ¨ä¸Šå±‚ä»£ç ä¸­catchå¹¶åœ¨å‰å°é¡µé¢æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</p>
</li>
<li><p><a href="https://github.com/Jasig/cas/blob/v3.5.2.1/cas-server-core/src/main/java/org/jasig/cas/authentication/principal/CredentialsToPrincipalResolver.java" target="_blank" rel="external">CredentialsToPrincipalResolver</a> CAS-Clientç«¯ä¸CAS-Serveräº¤äº’æ—¶è¿”å›ç»“æœ,é»˜è®¤åªæœ‰ä¸€ä¸ªusernameï¼Œå¦‚æœæƒ³é™„å¸¦å…¶ä»–å±æ€§ï¼Œå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªResolverï¼Œæ­¤å¤–ï¼Œjasigæä¾›äº†ä¸€äº›ä¸LDAPç­‰ç³»ç»Ÿé›†æˆçš„Resolverï¼ŒåŠŸèƒ½ä¹Ÿååˆ†å¼ºå¤§</p>
</li>
<li><p><a href="https://github.com/Jasig/cas/blob/v3.5.2.1/cas-server-core/src/main/java/org/jasig/cas/authentication/handler/AuthenticationException.java" target="_blank" rel="external">AuthenticationException</a> åœ¨authenticationé˜¶æ®µå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸ä¿¡æ¯å¯ä»¥å‰å°é¡µé¢ä¸­è¿›è¡Œå±•ç¤º</p>
</li>
</ul>
<h2 id="CASéƒ¨ç½²ä¸é…ç½®">CASéƒ¨ç½²ä¸é…ç½®</h2>
<p>å¯¹äºç‰ˆæœ¬ 3.5.x, éƒ¨ç½²çš„waråŒ…ä¸º moduleæ–‡ä»¶å¤¹ä¸‹çš„ <strong>cas-server-webapp-3.5.2.1.war</strong></p>
<h3 id="æ— httpsé…ç½®">æ— httpsé…ç½®</h3>
<ul>
<li>ä¿®æ”¹ /WEB-INF/deployerConfigContext.xmlï¼Œ è®¾ç½®å®‰å…¨å±æ€§</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;bean class=<span class="string">"org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"</span></div><div class="line">  p:httpClient-<span class="keyword">ref</span>=<span class="string">"httpClient"</span>  p:requireSecure=<span class="string">"false"</span>/&gt;</div></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹ /WEB-INF/spring-configuration/ticketGrantingTicketCookieGenerator.xml</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;bean <span class="variable">id=</span><span class="string">"ticketGrantingTicketCookieGenerator"</span> </div><div class="line">    <span class="variable">class=</span><span class="string">"org.jasig.cas.web.support.CookieRetrievingCookieGenerator"</span> </div><div class="line">    p:<span class="variable">cookieSecure=</span><span class="string">"false"</span> </div><div class="line">    p:<span class="variable">cookieMaxAge=</span><span class="string">"-1"</span>  </div><div class="line">    p:<span class="variable">cookieName=</span><span class="string">"CASTGC"</span> </div><div class="line">    p:<span class="variable">cookiePath=</span><span class="string">"/cas"</span> /&gt;</div><div class="line"> &lt;/beans&gt;</div></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹ \WEB-INF\spring-configuration\warnCookieGenerator.xm</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;bean <span class="variable">id=</span><span class="string">"warnCookieGenerator"</span> </div><div class="line">    <span class="variable">class=</span><span class="string">"org.jasig.cas.web.support.CookieRetrievingCookieGenerator"</span>   </div><div class="line">    p:<span class="variable">cookieSecure=</span><span class="string">"true"</span>  </div><div class="line">    p:<span class="variable">cookieMaxAge=</span><span class="string">"-1"</span>  </div><div class="line">    p:<span class="variable">cookieName=</span><span class="string">"CASPRIVACY"</span>   </div><div class="line">    p:<span class="variable">cookiePath=</span><span class="string">"/cas"</span> /&gt;</div></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>å‚æ•°p:cookieSecure=â€trueâ€ï¼ŒTRUEä¸ºé‡‡ç”¨HTTPSéªŒè¯ï¼Œä¸deployerConfigContext.xmlçš„å‚æ•°ä¿æŒä¸€è‡´ã€‚ </li>
<li>å‚æ•°p:cookieMaxAge=â€-1â€ï¼Œç®€å•è¯´æ˜¯COOKIEçš„æœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼Œ-1ä¸ºæ— ç”Ÿå‘½å‘¨æœŸï¼Œå³åªåœ¨å½“å‰æ‰“å¼€çš„IEçª—å£æœ‰æ•ˆï¼ŒIEå…³é—­æˆ–é‡æ–°æ‰“å¼€å…¶å®ƒçª—å£ï¼Œä»ä¼šè¦æ±‚éªŒè¯ã€‚å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä¸ºå¤§äº0çš„æ•°å­—ï¼Œæ¯”å¦‚3600ç­‰ï¼Œæ„æ€æ˜¯åœ¨3600ç§’å†…ï¼Œæ‰“å¼€ä»»æ„IEçª—å£ï¼Œéƒ½ä¸éœ€è¦éªŒè¯ã€‚</li>
</ol>
</blockquote>
]]></content>
    <summary type="html"><![CDATA[<h2 id="é¢„å¤‡çŸ¥è¯†">é¢„å¤‡çŸ¥è¯†</h2>
<p>å…·ä½“çš„CASåè®®è§, <a href="http://stackbox.org/2014/11/SSO-learning/" target="_blank" rel="external">CAS Protocal</a>,æ¥ä¸‹æ¥æˆ‘ä»¬è®²jasigçš„CAS Implementationçš„å‡ ä¸ªé‡è¦çš„ç‚¹ï¼Œä»¥ä¸‹æ‰€æœ‰æè¿°éƒ½åŸºäºç‰ˆæœ¬ <a href="http://mvnrepository.com/artifact/org.jasig.cas/cas-server-core/3.5.2.1" target="_blank" rel="external">3.5.2.1</a><br>]]></summary>
    
      <category term="å·¥å…·" scheme="http://stackbox.org/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ä¸€ä¸ªjavascriptåº“çš„æ„å»º]]></title>
    <link href="http://stackbox.org/2014/12/javascript-lib-architecture/"/>
    <id>http://stackbox.org/2014/12/javascript-lib-architecture/</id>
    <published>2014-12-17T12:38:24.000Z</published>
    <updated>2015-04-19T19:22:18.000Z</updated>
    <content type="html"><![CDATA[<p>ç¼–å†™js/jQueryæ’ä»¶æœ‰ä¸€äº›çº¦å®šä¿—æˆçš„å¥—è·¯ï¼Œæ ¹æ®è¿™äº›å¥—è·¯ä¾è‘«èŠ¦ç”»ç“¢ï¼Œä»£ç çš„ç»“æ„ä¸Šå°±ä¸ä¼šå‡ºç°å¤ªå¤§çš„é—®é¢˜äº†ï¼Œç‰¹åˆ«æ¨èè¿™ä¸ªå« <a href="https://github.com/shichuan/javascript-patterns/" target="_blank" rel="external">javascript-patterns</a> çš„é¡¹ç›®,ä¸€äº›demoè®©æˆ‘æ”¶è·è‰¯å¤šã€‚</p>
<h2 id="åŸºæœ¬ç»“æ„">åŸºæœ¬ç»“æ„</h2>
<h3 id="æ™®é€šçš„åº“">æ™®é€šçš„åº“</h3>
<p>ç”¨æœ€åŸºæœ¬çš„åŒ¿åå‡½æ•°å®ç°å³å¯</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">	<span class="keyword">var</span> root = <span class="keyword">this</span>;</div><div class="line">	root.YOURLIB = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">		FUNC1 : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{},</div><div class="line">		FUNC2 : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{}</div><div class="line">	}</div><div class="line">}())</div></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>call</code>è€Œä¸æ˜¯ä½¿ç”¨é—­åŒ…ï¼Œæ­¤æ—¶ä¸¤ç§å†™æ³•ç­‰æ•ˆï¼Œ<strong>undersocre.js</strong>ç”¨çš„æ˜¯callå†™æ³•</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">	<span class="keyword">var</span> root = <span class="keyword">this</span>;</div><div class="line">	root.YOURLIB = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">		FUNC1 : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{},</div><div class="line">		FUNC2 : <span class="function"><span class="keyword">function</span><span class="params">()</span></span>{}</div><div class="line">	}</div><div class="line">}.call(<span class="keyword">this</span>))</div></pre></td></tr></table></figure>

<h3 id="jQuery_æ’ä»¶">jQuery æ’ä»¶</h3>
<p>é€šè¿‡ä¸€ä¸‹æ–¹æ³•å¯ä»¥ä½¿çš„æ’ä»¶å¯ä»¥ è·¨CMD/AMD/Browser</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="params">(factory)</span> </span>{</div><div class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">'function'</span> && define.amd) {</div><div class="line">		<span class="comment">// AMD</span></div><div class="line">		define([<span class="string">'jquery'</span>], factory);</div><div class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> exports === <span class="string">'object'</span>) {</div><div class="line">		<span class="comment">// CommonJS</span></div><div class="line">		factory(<span class="built_in">require</span>(<span class="string">'jquery'</span>));</div><div class="line">	} <span class="keyword">else</span> {</div><div class="line">		<span class="comment">// Browser globals</span></div><div class="line">		factory(jQuery);</div><div class="line">	}</div><div class="line">}(<span class="function"><span class="keyword">function</span> <span class="params">($)</span> </span>{</div><div class="line"></div><div class="line">	$.fn.render = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{}</div><div class="line">	$.render2 = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{}</div><div class="line">}))</div></pre></td></tr></table></figure>

<p>å½“ç„¶,å¦‚æœä¸è€ƒè™‘Seajs,RequireJSçš„è¯,æœ€æ–¹ä¾¿çš„è¿˜æ˜¯ä½¿ç”¨åŒ¿åå‡½æ•°ï¼Œç„¶åæŠŠwindow.jQueryå½“æˆå‚æ•°ä¼ è¿›å»</p>
<h2 id="å†…éƒ¨ç»„ç»‡">å†…éƒ¨ç»„ç»‡</h2>
<p>æˆ‘ä»¬ä»¥ <a href="https://github.com/silviomoreto/bootstrap-select/blob/master/js/bootstrap-select.js" target="_blank" rel="external">bootstrap-select v1.6.3</a>,<a href="https://github.com/cferdinandi/smooth-scroll" target="_blank" rel="external">smooth-scroll</a>è¿™ä¿©é¡¹ç›®æ¥è¿›è¡Œåˆ†æï¼Œ</p>
<h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h3>
<p>ä¸€èˆ¬çš„Libraryéƒ½ä¼šæä¾›ä¸€å¥—defaultsé…ç½®æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨çš„æ—¶å€™å’Œç”¨æˆ·è‡ªå®šä¹‰çš„settingsè¿›è¡Œextend, <strong>smooth-scroll</strong>ä¸­çš„é‚£ç§</p>
<p><code>settings = extend(defaults, options ||{}));</code> å†™æ³•å°±ç›¸å½“èµï¼Œ<em>å¯ä»¥ä»¥ä¸€ç§ååˆ†ç®€å•çš„æ–¹å¼é˜²æ­¢ç©ºæŒ‡é’ˆå¼‚å¸¸</em>ã€‚</p>
<p>å‰©ä¸‹çš„å°±æ˜¯æ ¹æ®ä¸šåŠ¡åˆ’åˆ†ä¸šåŠ¡çš„funcitonäº†ï¼Œå¯¹äºå¦‚ä½•åˆ’åˆ†ï¼Œåªæœ‰å¤šåŠ ç»ƒä¹ äº†ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨æ³¨é‡Šé‡Œåƒå†™ä¸Š <strong>private</strong> å’Œ <strong>public</strong> æ¥åŒºåˆ†å¯¹å¤–æ¥å£å’Œå¯¹å†…æ¥å£æ˜¯ä¸ªä¸é”™çš„ä¹ æƒ¯ã€‚</p>
<h3 id="i18nä¸é…ç½®ç®¡ç†">i18nä¸é…ç½®ç®¡ç†</h3>
<p>i18næ˜¯å§é‚£äº›å›½é™…è¯çš„å­—ç¬¦å…¨éƒ½æ”¾åˆ°defautlsï¼Œæ¯”è¾ƒä¼˜é›…çš„åšæ³•æ˜¯defaultså®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å›½é™…åŒ–æ–‡ä»¶<br>ä¾¿èƒ½å’ŒåŸæœ‰çš„åº“æ–‡ä»¶è¿›è¡Œåˆ†ç¦»ï¼Œå…·ä½“å‚è€ƒ <a href="">bootstrap-datapicker</a></p>
]]></content>
    
    
      <category term="å‰ç«¯" scheme="http://stackbox.org/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[åˆ©ç”¨Nexuså’ŒShellè¿›è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²]]></title>
    <link href="http://stackbox.org/2014/12/auto-deployment-with-nexus/"/>
    <id>http://stackbox.org/2014/12/auto-deployment-with-nexus/</id>
    <published>2014-12-01T08:50:54.000Z</published>
    <updated>2015-04-18T17:04:00.000Z</updated>
    <content type="html"><![CDATA[<p>é¡¹ç›®éƒ¨ç½²å·¥ä½œæ˜¯ä¸€ä¸ªå¾ˆæ— èŠï¼Œå¾ˆè´¹æ—¶ï¼Œä½†åˆååˆ†é‡è¦çš„å·¥ä½œï¼Œè®°å¾—åœ¨é£é¥­çš„æ—¶å€™ï¼Œç”±äºé¡¹ç›®å¹¶æ²¡æœ‰é‡‡ç”¨mavenæ„å»ºï¼Œä»¥åŠé¡¹ç›®åŒ…å«äº†<br>å¤§é‡çš„å›¾ç‰‡ï¼Œéƒ¨ç½²å·¥ä½œå¾ˆæ˜¯éº»çƒ¦ï¼Œå½“æ˜¯åªæ˜¯åœ¨æµ‹è¯•çš„æ—¶å€™é‡‡ç”¨ ï½€git hook` çš„æ–¹å¼åŠè‡ªåŠ¨åŒ–è¿ç»´ã€‚</p>
<p>å®é™…åœ¨è¿ç»´çš„æ—¶å€™ï¼Œç¨å¾®éº»çƒ¦çš„é¡¹ç›®å¯ä»¥é‡‡ç”¨jenkinsï¼Œbambooï¼Œpuppetï¼Œä¸è¿‡ç”±äºç›®å‰dashboardè¿˜ç®—ä¸€ä¸ªå¾ˆå°çš„é¡¹ç›®ï¼Œ<br>å°±é‡‡ç”¨äº†shellï¼‹nexusä»“åº“çš„æ–¹å¼è¿›è¡Œéƒ¨ç½²ã€‚</p>
<a id="more"></a>

<p>æ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li><code>mvn deploy</code> å‘å¸ƒwaråŒ…åˆ°nexus</li>
<li>è°ƒç”¨nexusçš„æ¥å£è·å–æŸä¸ªç‰ˆæœ¬çš„waråŒ…</li>
<li>scpä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œå¹¶è¿œç¨‹è°ƒç”¨shellè¿›è¡Œæ¸…ç†ï¼Œè§£å‹ç¼©ï¼Œé‡å¯tomcatç­‰æ“ä½œ</li>
</ol>
<p>æ³¨æ„ç‚¹å¦‚ä¸‹:</p>
<ol>
<li>ä½¿ç”¨spring profileæ¥åŒºåˆ†developmentå’Œproductionç¯å¢ƒ</li>
<li>è¿œç¨‹å¯åŠ¨tomcatçš„æ—¶å€™,éœ€è¦export tomcatå¯åŠ¨æ‰€éœ€çš„ç¯å¢ƒå˜é‡</li>
</ol>
<p><strong>auto_dploy.sh</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="shebang">#!/bin/sh</span></div><div class="line">CURRENT_DIR=`<span class="built_in">pwd</span>`</div><div class="line"></div><div class="line">function <span class="function"><span class="title">init_localrepo</span></span>() {</div><div class="line">     rm -rf /tmp/dashboard;</div><div class="line">     mkdir /tmp/dashboard;</div><div class="line">     <span class="built_in">cd</span> /tmp/dashboard;</div><div class="line">     $(wget <span class="string">"http://192.168.10.61:9091/nexus/service/local/artifact/maven/content?g=com.miaozhen&a=dashboard&v=LATEST&r=snapshots&p=war&v=0.0.1-SNAPSHOT"</span> -O target.war)</div><div class="line">     scp target.war demo@example.com:/home/supertool/lvsijia/apache-tomcat-<span class="number">7</span>-demo/webapps/ROOT</div><div class="line">}</div><div class="line"></div><div class="line">init_localrepo;</div><div class="line"><span class="built_in">cd</span> <span class="variable">$CURRENT_DIR</span></div><div class="line">ssh supertool@<span class="number">56</span>.mzhen.cn <span class="string">"bash -s"</span> &lt;  server_deploy.sh</div></pre></td></tr></table></figure>

<p><strong>server_deploy.sh</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="shebang">#!/bin/sh</span></div><div class="line">DEPLOY_DIR=/home/YOURFOLDER/apache-tomcat-<span class="number">7</span>-demo/webapps/ROOT</div><div class="line">TOMCAT_DIR=/home/YOURFOLDER/apache-tomcat-<span class="number">7</span>-demo/bin</div><div class="line"></div><div class="line"><span class="built_in">cd</span> <span class="variable">$DEPLOY_DIR</span>;</div><div class="line"></div><div class="line">rm -rf assets</div><div class="line">rm -rf META-INF</div><div class="line">rm -rf WEB-INF</div><div class="line">rm index.jsp</div><div class="line"></div><div class="line">unzip target.war</div><div class="line">rm target.war</div><div class="line"></div><div class="line"><span class="comment">#å¼ºåˆ¶killæ‰tomcatè¿›ç¨‹</span></div><div class="line">ps ax|grep tomcat-<span class="number">7</span>-demo | awk <span class="string">'{print $1}'</span> |xargs kill -<span class="number">9</span>;</div><div class="line"></div><div class="line"><span class="built_in">cd</span> <span class="variable">$TOMCAT_DIR</span> ;</div><div class="line"></div><div class="line"><span class="keyword">export</span> CATALINA_BASE=/home/supertool/lvsijia/apache-tomcat-<span class="number">7</span>-demo</div><div class="line"><span class="keyword">export</span> CATALINA_HOME=/home/supertool/lvsijia/apache-tomcat-<span class="number">7</span>-demo</div><div class="line"><span class="keyword">export</span> CATALINA_TMPDIR=/home/supertool/lvsijia/apache-tomcat-<span class="number">7</span>-demo/temp</div><div class="line"><span class="keyword">export</span> JRE_HOME=/usr/java/jdk1.<span class="number">7.0</span>_05</div><div class="line"><span class="keyword">export</span> CLASSPATH=/home/supertool/lvsijia/apache-tomcat-<span class="number">7</span>-demo/bin/bootstrap.jar:/home/supertool/lvsijia/apache-tomcat-<span class="number">7</span>-demo/bin/tomcat-juli.jar</div><div class="line"></div><div class="line">bash startup.sh;</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html"><![CDATA[<p>é¡¹ç›®éƒ¨ç½²å·¥ä½œæ˜¯ä¸€ä¸ªå¾ˆæ— èŠï¼Œå¾ˆè´¹æ—¶ï¼Œä½†åˆååˆ†é‡è¦çš„å·¥ä½œï¼Œè®°å¾—åœ¨é£é¥­çš„æ—¶å€™ï¼Œç”±äºé¡¹ç›®å¹¶æ²¡æœ‰é‡‡ç”¨mavenæ„å»ºï¼Œä»¥åŠé¡¹ç›®åŒ…å«äº†<br>å¤§é‡çš„å›¾ç‰‡ï¼Œéƒ¨ç½²å·¥ä½œå¾ˆæ˜¯éº»çƒ¦ï¼Œå½“æ˜¯åªæ˜¯åœ¨æµ‹è¯•çš„æ—¶å€™é‡‡ç”¨ ï½€git hook` çš„æ–¹å¼åŠè‡ªåŠ¨åŒ–è¿ç»´ã€‚</p>
<p>å®é™…åœ¨è¿ç»´çš„æ—¶å€™ï¼Œç¨å¾®éº»çƒ¦çš„é¡¹ç›®å¯ä»¥é‡‡ç”¨jenkinsï¼Œbambooï¼Œpuppetï¼Œä¸è¿‡ç”±äºç›®å‰dashboardè¿˜ç®—ä¸€ä¸ªå¾ˆå°çš„é¡¹ç›®ï¼Œ<br>å°±é‡‡ç”¨äº†shellï¼‹nexusä»“åº“çš„æ–¹å¼è¿›è¡Œéƒ¨ç½²ã€‚</p>
]]></summary>
    
      <category term="è¿ç»´" scheme="http://stackbox.org/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[åŸºäºCASçš„å•ç‚¹ç™»å½•å­¦ä¹ ]]></title>
    <link href="http://stackbox.org/2014/11/SSO-learning/"/>
    <id>http://stackbox.org/2014/11/SSO-learning/</id>
    <published>2014-11-10T08:11:52.000Z</published>
    <updated>2015-04-19T19:21:26.000Z</updated>
    <content type="html"><![CDATA[<p>ç›®å‰ä¸€èˆ¬ä½¿ç”¨èˆ¬ç”¨jasgi-CASæ¥å®ç°SSO</p>
<p>å…·ä½“åè®®ï¼š <a href="http://jasig.github.io/cas/4.0.0/protocol/CAS-Protocol.html" target="_blank" rel="external">http://jasig.github.io/cas/4.0.0/protocol/CAS-Protocol.html</a></p>
<p>åˆ†ä¸ºåŸºç¡€æ¨¡å¼å’Œä»£ç†æ¨¡å¼ï¼Œä»£ç†æ¨¡å¼æ˜¯cas3æ–°å¢ç‚¹å†…å®¹</p>
<p><img src="/image/cas/cas-web-flow.png" alt=""></p>
<p><img src="/image/cas/proxy-web-flow.jpg" alt=""></p>
]]></content>
    
    
      <category term="å·¥å…·" scheme="http://stackbox.org/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ä¸œå¥”è¥¿èµ°æ‰¾å·¥ä½œ]]></title>
    <link href="http://stackbox.org/2014/08/some-interviews/"/>
    <id>http://stackbox.org/2014/08/some-interviews/</id>
    <published>2014-08-14T14:23:03.000Z</published>
    <updated>2015-02-27T16:30:32.000Z</updated>
    <content type="html"><![CDATA[<p>8æœˆä¸­æ—¬æ¥åŒ—äº¬ä¹‹åå°±å¼€å§‹äº†æ‰¾å·¥ä½œå†ç¨‹,è¿‡ç¨‹è¾›é…¸ï¼Œå¹¶è®©æˆ‘å¯¹è¿‡å»è¿™ä¸€å¹´è¿›è¡Œåæ€ï¼Œæ€»ç»“èµ·æ¥å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¯¹æ•°æ®ç»“æ„ï¼Œç®—æ³•ï¼Œè®¾è®¡æ¨¡å¼è¿™äº›åŸºç¡€çš„ä¸œè¥¿ç¼ºä¹å…´è¶£ï¼Œè®¤ä¸ºè¿™äº›ä¸œè¥¿ä¸èƒ½è£…Xæ‰€ä»¥å°±ä¸æ·±å…¥å­¦ä¹ äº†,ä½†ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼ŒåŸºç¡€ä¸è¡Œæ˜¯å†™ä¸å‡ºå¥½ä»£ç çš„</li>
<li>å¥½é«˜éª›è¿œï¼Œä¸€å‘³çš„è¿½å¯»æ–°çš„æ¡†æ¶ï¼Œåªçœ‹tutorialå´ä¸çœ‹referenceå’Œjavadocï¼Œæ²¡æœ‰å»ææ˜ç™½ä¸ºä»€ä¹ˆframeworkè¿™ä¹ˆå®ç°ï¼Œä¸ºä»€ä¹ˆapi/spiè¿™ä¹ˆè®¾è®¡</li>
<li>æ•´å¤©å˜´ç‚®ï¼Œå´ç–äºå®è·µï¼Œgithubä¸Šæœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´æ²¡æœ‰commit</li>
<li>å¯¹é¡¹ç›®è´¨é‡è¦æ±‚ä¸é«˜ï¼Œä¸€å¨çƒ‚ä»£ç æ‰”é‚£å„¿åªæ±‚èƒ½è¿‡äº†QAå°±è¡Œï¼Œæ²¡æœ‰æŒç»­çš„é‡æ„ä¸æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<p>æ©ï¼Œç›®å‰å·²ç»åœ¨ç§’é’ˆå·¥ä½œäº†ï¼Œæ°”æ°›ç›¸å½“æ£’ï¼</p>
<h2 id="58åŒåŸ">58åŒåŸ</h2>
<p>å…¬å¸åœ¨æœé˜³åŒºçš„ä¸¤åº§å°æ¥¼é‡Œï¼Œè™½ç„¶åœ¨å¸éƒ½å¯¸åœŸå¯¸é‡‘çš„åœ°æ–¹çœ‹èµ·æ¥ä¸é”™ï¼Œä¸è¿‡å’Œæ—è¾¹çš„åœŸè±ªå®Œç¾ä¸–ç•Œæ¯”èµ·æ¥å°±å°å·«è§å¤§å·«äº†ã€‚<br>ç¬¬ä¸€æ¬¡é¢è¯•è¿™ç­‰è§„æ¨¡çš„å…¬å¸ï¼Œæœ‰ç‚¹ä¸æ·¡å®šï¼Œè€Œä¸”å¯¹è¿™æ¬¡é¢è¯•æ²¡æœ‰åšä»€ä¹ˆå‡†å¤‡ï¼Œè¡¨ç°æå·®</p>
<p>é¢è¯•èŒä½æ˜¯å¹¿å‘Šç ”å‘å·¥ç¨‹å¸ˆï¼Œé¦–å…ˆæ˜¯ä¸€ä¸ªç®€çŸ­çš„è‡ªæˆ‘ä»‹ç»ï¼Œç„¶åæ ‡å‡†çš„æµç¨‹å°±ä¼šé—®ä½ ä¸ºä»€ä¹ˆç¦»èŒï¼Œç®€å†ä¸­æœ‰é¡¹ç›®çš„è¯ä¼šé—®ä½ è®©ä½ æ„Ÿè§‰æœ€å¥½çš„é¡¹ç›®æ˜¯ä»€ä¹ˆï¼Œæ©ï¼Œéœ€è¦æ³¨æ„æ„Ÿè§‰æœ€å¥½å’Œä¸ºä»€ä¹ˆç¦»èŒï¼Œæœ‰æ—¶ä¼šæœ‰ä¸€äº›é€»è¾‘ä¸Šçš„çŸ›ç›¾ï¼Œéœ€è¦æ³¨æ„</p>
<p>ç„¶åé—®äº†ä¸€ä¸‹springæœ‰å“ªå‡ æ–¹é¢æœ‰ç‚¹ï¼Œï¼ˆåŸºç¡€ ä¸ç‰¢å¾ˆè‡ªç„¶çš„å°±æŠŠDIå’ŒIOCææ··äº†ï¼‰ï¼ŒIOCçš„ä¸»è¦ä½œç”¨ï¼ˆåº”è¯¥å›ç­”ä¸šä¸šåŠ¡ä¸Šè§£è€¦ï¼Œå‰¥ç¦»å¤šä½™ä»£ç ï¼Œè€Œä¸æ˜¯è¯´ç”¨XXXæ³¨è§£æ³¨å…¥ï¼‰ï¼Œspringå¦‚ä½•å®ç°çš„ï¼Œé‡Œé¢ç”¨åˆ°äº†äº›ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼ŒDIæ€ä¹ˆç”¨ä¼ªä»£ç æ¥å®ç°ï¼ˆè™½ç„¶å‰äº›æ—¥å­åœ¨å†™ä¸€ä¸ªjsr330å®ç°ï¼Œä½†ä¾èµ–çš„å¤„ç†è¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œä¸€ä¸å°å¿ƒå°±å¾ªç¯äº†ï¼Œæ‰€ä»¥è¿™é“ä¼ªä»£ç çš„é¢˜æ²¡æœ‰å†™å‡ºæ¥ï¼‰</p>
<p>ä¹‹åå°±æ˜¯ä¸€äº›åŸºç¡€ï¼Œjavaä¸­hashmapçš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œequalså’Œhashcodeæ–¹æ³•ï¼ŒäºŒå‰æ ‘ä¸­åºéå†ï¼Œå‰åºéå†ï¼Œmysqlç´¢å¼•çš„æ•°æ®ç»“æ„ï¼ŒåŠ ç´¢å¼•çš„åŸåˆ™ï¼ŒInnoDBå’Œmyiasmçš„åŒºåˆ«ï¼Œä»¥åŠå¸¸è§çš„mysqlä¼˜åŒ–æ–¹æ¡ˆï¼ŒjvmåŸç†ç­‰ç­‰ã€‚</p>
<p>æ­£å¦‚ <a href="http://kanzhun.com" target="_blank" rel="external">æŸç½‘ç«™</a> æ‰€è¯´ï¼Œhashmap,jvm,æ€§èƒ½è°ƒä¼˜æ˜¯å¿…è€ƒé¢˜~~å“</p>
<p>æ€»ä½“æ¥è®²è¿™æ¬¡é¢è¯•è¡¨ç°å¾ˆå·®ï¼Œä½†é¢è¯•å®˜è„¾æ°”å¾ˆå¥½æ²¡è¢«æˆ‘æ°”ç–¯~~|| ä¸‡å¹¸</p>
<h2 id="å»å“ªç½‘">å»å“ªç½‘</h2>
<p>é¢çš„æ˜¯å»å“ªçš„æ— çº¿éƒ¨é—¨ï¼Œå¡«å®Œä¿¡æ¯è¡¨åç»™äº†ä¸€å¥—ç¬”è¯•é¢˜åšï¼Œæœ‰ä¸€äº›æ•°ç†é€»è¾‘çš„é¢˜ï¼Œç„¶åæ˜¯ä¸€äº›ç®—æ³•æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚hashç®—æ³•ï¼Œçº¿ç¨‹é—´é€šè®¯ï¼Œç¨³å®šæ€§/éç¨³å®šæ€§æ’åºï¼ŒäºŒå‰æ ‘éå†ï¼Œbashè„šæœ¬å¯¹æ—¥å¿—çš„å¤„ç†ï¼ˆsedï¼Œawkå¿˜äº†æ€ä¹ˆç”¨äº†ï¼‰ï¼Œæ•°æ®åº“è®¾è®¡åŸåˆ™ç­‰ä¸€äº›é—®é¢˜ã€‚å‡†å¤‡ä¸€ä¸‹ä¸ç®—å¤ªéš¾ã€‚ä¸€äº›å®é™…å¼€å‘é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œæ¯”å¦‚redis memcacheçš„é€‚ç”¨åœºæ™¯ï¼Œå°±æ²¡æœ‰ç­”å‡ºæ¥ï¼Œè¿™ä¸ªè¿˜å¾—å¤šäº†è§£ä¸€ä¸‹ã€‚æœ‰å‡ é“åœ¨çº¸ä¸Šç°åœºç¼–ç¨‹çš„é¢˜ï¼Œå¿ƒé‡Œé¢å¤ªæ€¥äº†ï¼Œå¥½åƒå°±ç­”é”™äº†ã€‚æ‰‹å†™è®¾è®¡æ¨¡å¼ä»£ç æœ‰ä¸€äº›é”™è¯¯ï¼ŒåŸºç¡€éœ€è¦å†è¡¥è¡¥ã€‚å¦å¤–é—®äº†ä¸€ä¸‹servletä½“ç³»ç»“æ„çš„é—®é¢˜ï¼Œæ³¨å…¥</p>
<p>é¢è¯•å®˜åº”è¯¥æ˜¯ä¸€ä½æŠ€æœ¯éª¨å¹²ï¼ŒæŒºå’Œå–„çš„ ã€‚æ•´ä¸ªé¢è¯•è¿‡ç¨‹ä¸­ï¼Œåœ¨é£é¥­ç§¯ç´¯çš„ç»éªŒå¯¹æˆ‘çš„å¸®åŠ©æå¤§ã€‚ç”±äºéƒ¨é—¨ç»ç†ä¸åœ¨ï¼Œä¼°è®¡ä¸‹å‘¨æ‰èƒ½ç­‰åˆ°æ¶ˆæ¯ã€‚</p>
<h2 id="å…°äº­é›†åŠ¿">å…°äº­é›†åŠ¿</h2>
<p>ç¬¬ä¸€ä¸ªæ¥é¢è¯•ç»™æ°´å–çš„å…¬å¸ï¼Œå…¬å¸ç®—æ˜¯å¤–ä¼ï¼Œå¾ˆæ˜¯é«˜å†·ï¼Œé¢è¯•ä¹Ÿæ˜¯ä¿©äººä¸€å—é¢çš„,å‹åŠ›å¾ˆå¤§ã€‚</p>
<p>è¯¦ç»†çš„é—®äº†ä¸€ä¸‹ä»¥å‰åšçš„é¡¹ç›®ï¼Œæ¯”å¦‚è®©ä½ ç”»ä¸ªç³»ç»Ÿæ¶æ„å›¾ï¼Œç„¶åè®²ä¸€ä¸‹æ”¯ä»˜æ¨¡å—çš„æ•´ä¸ªæµç¨‹ï¼Œå…³äºæ”¯ä»˜çš„é—®é¢˜ï¼Œå½“æ—¶<br>åšçš„æ—¶å€™å°±è¿·è¿·ç³Šç³Šçš„ï¼Œæ²¡æœ‰ç­”å¥½ï¼Œä¹‹åé—®äº†ä¸€äº›å¸¸è§çš„åº“çš„ä½¿ç”¨ï¼Œæˆ‘è¯´äº†ä¸€ä¸ªquartzå’Œehcacheï¼Œå°±è¢«é—®åˆ°äº†è¿™ä¸ª<br>ç¼“å­˜çš„ä½¿ç”¨åœºæ™¯ï¼Œç­”å¾—ä¸å¤ªå¥½ï¼Œä¸è¿‡å­¦ä¹ è¿˜æ˜¯è‰¯å¤šçš„ï¼ˆehcacheç›´æ¥å°†ç¼“å­˜æ”¾åˆ°äº†jvmä¸­ï¼Œæ˜¾ç„¶æ²¡æœ‰è¯¸å¦‚memcacheä¹‹ç±»çš„å¿«ï¼‰,<br>æ­¤å¤–è¿˜æœ‰ä¸€äº›åŸºç¡€é—®é¢˜ï¼Œæ¯”å¦‚hashmapçš„ç»“æ„ï¼Œé€‚ç”¨åœºæ™¯ï¼Œservletä¸filterçš„åŒºåˆ«ï¼Œæè¿°ä¸‹ä¸‰æ¬¡æ¡æ‰‹ï¼Œstruts2æ˜¯æ€ä¹ˆå®ç°è¯·æ±‚åˆ†å‘çš„ï¼Œå¤åˆä¸»é”®æ€ä¹ˆæŸ¥è¯¢çš„ï¼Œhashmapæ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼ˆå¦‚æœæ˜¯çš„è¯å“ªä¸ªæ–¹æ³•ä¸å®‰å…¨ï¼‰,æœ€åä¸€é“ç›´æ¥ä¸Šæœºç¼–ç¨‹æ±‚ä¸€ä¸ªè¯»æ–‡ä»¶ç®—è¯é¢‘çš„é—®é¢˜ã€‚æ²¡<br>å›ç­”å¥½(åœ¨æ–‡ä»¶ç‰¹å¤§çš„æƒ…å†µä¸‹ç”¨hashmapçš„æ•ˆç‡è›®ä½çš„,åº”è¯¥æ¢æˆå…¶ä»–çš„map,å†™çš„ä»£ç æ²¡æœ‰å¤„ç†ç©ºæŒ‡é’ˆå¼‚å¸¸çš„æƒ…å†µ)ã€‚è¿˜æœ‰ï¼Œ{} åœ¨jsé‡Œå«å¯¹è±¡å•Šï¼Œè€Œä¸æ˜¯å«å­—å…¸ï¼Œmapä¹‹ç±»çš„ï¼Œåˆ«ææ··äº†</p>
<p>ps: è¦æˆä¸ºä¸€ä¸ªå¥½çš„å¼€å‘å¾—å…ˆæˆä¸ºä¸€ä¸ªå¥½çš„è¿ç»´</p>
<p>æ€»ä½“æ„Ÿè§‰ä¸æ»¡æ„ï¼Œç­‰æ¶ˆæ¯ä¸­</p>
<h2 id="ä¹è§†ç½‘">ä¹è§†ç½‘</h2>
<p>å…¬å¸çœ‹èµ·æ¥å¾ˆæ˜¯è‹¦é€¼,æ²¡æœ‰å‰å°ï¼Œå»äº†ä¹‹åè·Ÿhræ‰“ç”µè¯ï¼Œç„¶ååšäº†ä¸€å¥—é¢˜ï¼Œç»§ç»­å¾ˆè‹¦é€¼çš„è¿ä¸ªä½œä¸ºéƒ½æ²¡æœ‰ï¼Œé¢˜ç›®å¤§éƒ½æ˜¯é€‰æ‹©é¢˜ï¼Œå¾ˆåŸºç¡€ï¼Œåé¢ä¸¤é“æ˜¯ä¸€ä¸ªå…³äºçº¢é»‘æ ‘å’Œb+æ ‘çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ç”»å‡ºå•ç‚¹ç™»å½•çš„æ—¶åºå›¾ã€‚æœ‰ä¸€ä¸ªä»¥å‰æ²¡æ³¨æ„åˆ°çŸ¥è¯†ç‚¹ï¼Œ<em><a href="http://blog.csdn.net/yuanyuanmmm/article/details/4922587" target="_blank" rel="external">String s = new String(â€œabcâ€)ä¸€å…±åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡</a></em>,ç­”æ¡ˆåº”è¯¥æ˜¯ä¸¤ä¸ªï¼Œå¯¹jvmçš„ä¸€äº›æœºåˆ¶ä¸ç†Ÿï¼Œé—®é¢˜ç­”é”™äº†ã€‚</p>
<p>ç¬¬ä¸€ä¸ªé¢è¯•å®˜æ°”åœºå¾ˆå¤§ï¼Œå¯èƒ½ä»¥å‰åšçš„é¡¹ç›®æ¯”è¾ƒå°ï¼Œè¢«é„™è§†äº†ä¸€ç•ªï¼Œç„¶åè¯´äº†ä¸‹ä»¥å‰åšçš„ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚æµç¨‹ï¼Œæ”¯ä»˜ä¹‹ç±»çš„ï¼Œå¯¹è‡ªå·±è¡¨ç°ä¸å¤ªæ»¡æ„ã€‚ç„¶åè¯´äº†ä¸€ä¸‹scheduleï¼Œé¢è¯•å®˜é—®æˆ‘<br>æ˜¯ä¸æ˜¯åˆ†å¸ƒå¼çš„scheduleï¼Œè¡¨ç¤ºä¸ä¼šã€‚æœ€åè¯´äº†ä¸€ä¸‹è–ªèµ„è¦æ±‚ï¼Œå¯èƒ½è¦æ±‚æ¯”è¾ƒä½å§ï¼Œåˆè¢«é„™è§†äº†ä¸€ç•ªã€‚</p>
<p>ç¬¬äºŒä½é¢è¯•å®˜é—®äº†ä¸€äº›åŸºç¡€çš„ä¸œè¥¿ï¼Œæ¯”å¦‚gitçš„ä¼˜ç‚¹ï¼Œmavençš„ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼Œç„¶åé—®æˆ‘å¯¹javaå“ªæ–¹ä¾¿æ¯”è¾ƒç†Ÿæ‚‰ï¼Œè¿™å—æˆ‘æ²¡ç­”ä¸Šæ¥ï¼Œå…¶å®ä¸»è¦æŒ‡çš„å°±æ˜¯ <strong>å®¹å™¨ï¼Œioï¼Œ ç½‘ç»œ</strong>ã€‚å¦å¤–é—®äº†ä¸€ä¸‹äº‹åŠ¡ï¼Œä¸å¤ªç†Ÿæ‚‰ã€‚</p>
<p>æœ€åäº†è§£åˆ°è¿™ä¸ªèŒä½æ˜¯åšåŸºäºdockerçš„saaså¼€å‘çš„ï¼Œè¿™æ–¹é¢æ²¡ç»éªŒï¼Œä¼°è®¡ä¹Ÿæ²¡æœºä¼šäº†ã€‚</p>
<h2 id="æœç‹—">æœç‹—</h2>
<p>å»äº†ä¹‹åå†èŒ¶æ°´é—´ï¼Œsogouæœ‰ä¸“é—¨çš„é˜¿å§¨æ•´ç†å’–å•¡æœºï¼Œæ³¡èŒ¶ï¼Œè¿˜æœ‰è‡ªåŠ¨å”®è´§æœºã€‚ã€‚styleéå¸¸æ£’ï¼Œç”³è¯·çš„èŒä½æ˜¯sogouå•†ä¸šå¹³å°çš„ï¼Œå¤§æ¦‚æ˜¯åšå¹¿å‘Šä¹‹ç±»çš„ï¼Œé¢è¯•å®˜è¿‡æ¥åé—®äº†ä¸‹é¡¹ç›®çš„ä¸€äº›ä¸œè¥¿ï¼Œä¸ç»æ„é—´å‘ç°èƒ½è¯´çš„è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ¯”å¦‚ mavenå¤šmoduleçš„æ¶æ„æ‹†åˆ†ï¼Œ<br>æ— çº¿æ¥å£ï¼Œæ”¯ä»˜æ¨¡å—ï¼Œsocketserverä¹‹ç±»çš„ï¼Œé¢è¯•å®˜çš„é—®é¢˜è·¨åº¦ååˆ†è·³è·ƒï¼Œæ¶‰åŠmvenä½¿ç”¨,gitä½¿ç”¨ï¼Œå€’æ’ç´¢å¼•ï¼Œè¿ç»´ï¼Œlinuxï¼Œshellè„šæœ¬ï¼ˆè®©æˆ‘è¯»å–å‚æ•°ã€‚ã€‚å¿˜äº†),å‡ ä¸ªlinuxå‘½ä»¤æ¯”å¦‚æŸ¥çœ‹çº¿ç¨‹çš„cpuå æœ‰ç‡ï¼ŒæŸ¥çœ‹ç£ç›˜ç©ºé—´çš„ä½¿ç”¨æƒ…å†µï¼ŒæŸ¥çœ‹çº¿ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œ<br>å¦‚ä½•ä¸ç¼–å†™ä»£ç çŸ¥é“jvmé‡Œæœ‰å‡ ä¸ªå¯¹è±¡(ç»å°ç¾½åŒå­¦æé†’javaå·²ç»è‡ªå¸¦äº†ä¸€å¥—è°ƒä¼˜å·¥å…·äº†<a href="http://benlocke.blog.163.com/blog/static/213843169201211279461359/" target="_blank" rel="external">è¯¦è§</a>)ï¼Œå†™ä¸€ä¸ª<a href="https://code.csdn.net/snippets/455752" target="_blank" rel="external">å•ä¾‹æ¨¡å¼,ä¸€å¼€å§‹å†™çš„æœ‰äº›å°é—®é¢˜</a>ï¼Œ<br>hashmapçš„ç»“æ„ï¼Œgcç®—æ³•ç­‰ã€‚æœ€åå‡ºäº†ä¸€ä¸ªç®—æ³•é—®é¢˜ï¼Œç”¨stackæ¥å®ç°queueï¼Œæˆ‘çš„æ€è·¯æ˜¯O(n)çš„ï¼Œæ•ˆç‡è¾ƒä½ï¼Œ<br>ç½‘ä¸Šæœ‰æ›´å¥½çš„<a href="http://www.cnblogs.com/wanghui9072229/archive/2011/11/22/2259391.html" target="_blank" rel="external">è§£å†³æ–¹æ³•</a>ã€‚æœ€åé—®äº†ä¸€ä¸‹äº‹åŠ¡ç›¸å…³çš„ä¸œè¥¿ï¼Œæ¯”å¦‚springé»˜è®¤çš„éš”ç¦»çº§åˆ«åˆ†å‡ ç§</p>
<p>å¥½åƒæ‹›è˜ä¸Šåªå†™æ‹›ä¸€ä¸ªï¼Œè¿˜æ˜¯è¦æ±‚ç¡•å£«,ä¼°è®¡æ²¡æˆäº†</p>
<h2 id="ç§’é’ˆç³»ç»Ÿ">ç§’é’ˆç³»ç»Ÿ</h2>
<p>ç§’é’ˆå…¶å®æ˜¯ä¸ªäººæ¯”è¾ƒå‘å¾€çš„ä¼ä¸šï¼Œç®€å†ä¹Ÿæ˜¯æŠ•äº†ä¸¤æ¬¡æ‰ç»™é¢è¯•æœºä¼šï¼Œæ€»ä½“æ„Ÿè§‰å°šå¯ï¼Œé¢è¯•å®˜ååˆ†çš„å‹å–„ï¼Œä¸€äº›ä¸ä¼šçš„é—®é¢˜ä¼šç»™ä½ å¼•å¯¼ï¼Œä¸€äº›é—®é¢˜è¿˜æ˜¯æ¯”è¾ƒæœ‰æŒ‘æˆ˜æ€§çš„ï¼Œæ¯”å¦‚åŠ¨æ€pvçš„å®ç°æ€è·¯ï¼ˆè‹¥å¹²ç§ï¼Œæˆ‘è¯´çš„æœ‰socket.io,listenerç­‰),ä¸€ä¸ªå®Œæ•´çš„ä¸­é—´ä»¶çš„è®¾è®¡æ–¹æ³•ï¼Œrestçš„å¹‚ç­‰æ€§(è¿™ä¸ªå§‹ç»ˆç†è§£ä¸èƒ½å•Š)ï¼Œä¸€äº›æŠ¥è¡¨çš„å®ç°ï¼Œå¦å¤–è¿˜äº†è§£åˆ°ä¸€ä¸ªå«setmeshçš„ä¸œè¥¿ï¼Œå¾ˆæ˜¯ç¥å¥‡ï¼Œæ€»ä½“æ„Ÿè§‰å¤§æ¦‚è¿˜æ˜¯æœ‰ä¸€äº›å¸Œæœ›çš„ã€‚</p>
<p>å¦‚æœèƒ½äºŒé¢çš„è¯ï¼Œå¤§æ¦‚è¦ç¢°ä¸€äº›struts1å’Œå‰ç«¯çš„ä¸€äº›ä¸œè¥¿äº†ï¼Œå‡å¦‚è¢«å½•ç”¨çš„è¯ä¼°è®¡è¦å†™å¥½å¤šjsäº†ã€‚ä¸è¿‡æœ‰æœºä¼šç¢°hadoopä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æœºä¼š</p>
<p>ç¥æˆ‘å¥½è¿ï¼</p>
<p>ç¬¬äºŒå¤©æ˜¯éƒ¨é—¨çš„äº§å“æ€»ç›‘é¢çš„ï¼Œè™½ç„¶æœ‰ä¸€å®šçš„å¹´é¾„äº†ï¼Œä½†æ˜¯çœŸçš„å¥½èŒï¼Œä¿æŒè¿™ç§å¥½å¿ƒæ€çœŸå¿ƒå¤ªå‰å®³äº†ï¼Œæœ€åæ˜¯å’Œhré¢ï¼Œä¹Ÿæ²¡è°ˆå¤šå°‘ä¸œè¥¿ï¼Œä¸è¿‡å…³äºä¸ºä»€ä¹ˆè¾èŒçš„åŸå› ï¼Œè¯´çš„è¿˜æ˜¯ä¸å¤Ÿå¥½ï¼Œæ¯”å¦‚é—®ä¸ºä»€ä¹ˆç¦»èŒï¼Œhré¢çš„æ—¶å€™å¯¹è€ä¸œå®¶çš„è¯„ä»·æœ‰ç‚¹ç‹ äº†ï¼Œåº”è¯¥ç‚¹åˆ°ä¸ºæ­¢ã€‚ç„¶åé—®äº†ä¸€ä¸‹å’Œå¸éƒ½çš„å…¶ä»–äº’è”ç½‘å…¬å¸ç›¸æ¯”ä¸ºä»€ä¹ˆé€‰æ‹©ç§’é’ˆï¼Œè¿™ä¸ªåœ¨è¯´çš„æ—¶å€™æ¡ç†ä¸å¤ªæ¸…æ¥šã€‚</p>
<p>æœ€åæ‹¿åˆ°äº†offerï¼Œå¾ˆæ¬¢ä¹ã€‚</p>
<h2 id="è“å…‰é«˜å“">è“å…‰é«˜å“</h2>
<p>ç½‘ä¸Šæ²¡æœ‰ç›¸å…³çš„èµ„æ–™ï¼Œé¢è¯•çš„æ—¶å€™æ‰çŸ¥é“å…¬å¸çš„äº§å“æ˜¯ä¸€ä¸ªå«è“å…‰è”ç›Ÿçš„ä¸œè¥¿ï¼Œç®—æ˜¯åšçº¿ä¸‹è½¯ä»¶é¢„è£…å’Œæ¨å¹¿çš„,ç›®å‰çš„æ˜¯pcç«¯ï¼Œæ®è¯´è¦å‘åŠ›<br>ç§»åŠ¨ç«¯ï¼Œé¢è¯•çš„ä¸œè¥¿è¿˜ç®—ç®€å•ï¼Œç»™äº†å¥—åšäº†ä¸‹ï¼Œä¸»è¦æ˜¯sqlï¼Œæ­£åˆ™ï¼Œè®¾è®¡æ¨¡å¼ç­‰ç­‰ï¼Œsqlç›¸å…³çš„é—®é¢˜ç­”å¾—éƒ½ä¸å¤ªå¥½ã€‚</p>
<p>æ¯”å¦‚è”åˆç´¢å¼•çš„é—®é¢˜ï¼ŒåŒæ—¶é€‰å‡ºè¡¨ä¸­ç”·ç”Ÿå’Œå¥³ç”Ÿçš„æ•°é‡(case byè¯­æ³•)ï¼Œä»¥åŠleft join whereå’Œleft join andçš„åŒºåˆ«ï¼Œæ©ï¼Œæ•°æ®åº“æ–¹é¢æˆ‘è¿˜æ˜¯å¾ˆæ¬ ç¼ºã€‚</p>
<p>å·²ç»ç¡®è®¤é€šè¿‡,ç»™äº†ä¸€å¤©æ—¶é—´æ¥è€ƒè™‘ï¼Œä¸è¿‡æ ¹æ®HRçš„èŒä¸šç´ å…»ä¸Šçœ‹ï¼ŒHRèŒä¸šæ°´å¹³æ¯”ç§’é’ˆçš„æ›´ä¸“ä¸šï¼Œç§’é’ˆçš„hrçœŸçš„å°±æ˜¯ä¸€å°å§‘å¨˜ã€‚</p>
<h2 id="é˜¿é‡Œå·´å·´">é˜¿é‡Œå·´å·´</h2>
<p>å†…æ¨ç½‘æŠ•é˜¿é‡Œå°å¾®é‡‘çš„,æµç¨‹å¾ˆå¿«ï¼Œç„¶åè¿›è¡Œäº†ä¸€æ¬¡ç”µè¯é¢è¯•ï¼Œä¸å¾—ä¸è¯´é˜¿é‡Œçš„æŠ€æœ¯è¿˜æ˜¯å¾ˆå‰å®³çš„ï¼Œä¸è¿‡8ç‚¹å¤šäº†è¿˜æ²¡ä¸‹ç­ï¼Œo(â•¯â–¡â•°)o</p>
<p>é—®çš„é—®é¢˜æŠ€æœ¯å«é‡å¾ˆé«˜ï¼Œä¸åƒå…¶ä»–å…¬å¸é‚£æ ·åªæ˜¯é—®ä¸‹æµ…æ˜¾çš„åŸç†ï¼Œè€Œæ˜¯å¯¹æ¯ä¸€é¡¹æŠ€æœ¯éƒ½ä¼šåˆ¨æ ¹æ­åº•çš„é—®æ€è·¯å’Œåœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨<br>æƒ…å†µï¼Œæ¯”å¦‚ä¸ºä»€ä¹ˆè¦è¿ç§»åˆ°springmvcï¼Œè®¾è®¡æ¨¡å¼çš„ä½¿ç”¨ï¼Œå•ä¾‹æ¨¡å¼åœ¨é¡¹ç›®ä¸­æ€ä¹ˆç”¨çš„ï¼Œè¿˜æœ‰æ²¡æœ‰äº†è§£å…¶ä»–çš„è®¾è®¡æ¨¡å¼ï¼Œé€‚é…å™¨<br>æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯ï¼Œç„¶åæ ¹æ®ä½ çš„é¡¹ç›®é—®ä½ çš„é—®é¢˜ï¼Œæ¯”å¦‚åœ¨å…¬å¸è´Ÿè´£ä»€ä¹ˆæ¨¡å—ï¼Œæ”¯ä»˜æ¨¡å—çš„å®ç°ï¼Œä¸»è¦é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œæ”¯ä»˜çš„ä¸€è‡´æ€§<br>é—®é¢˜æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Œå¦å¤–é¡¹ç›®ä¸­å¯¹ä½ æˆé•¿æœ€å¤§çš„é¡¹ç›®æ˜¯å•¥ï¼ˆè¿™ä¸ª58ä¹Ÿé—®è¿‡ï¼‰ï¼Œä¹è§‚é”æ‚²è§‚é”ï¼Œjvmåˆ†ä»£å†…å­˜ç®¡ç†æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚ç„¶åæƒé™<br>ç³»ç»Ÿçš„è®¾è®¡çš„æ€è·¯ï¼Œæ˜¯æ€ä¹ˆè®¾è®¡çš„ï¼Œå½“æ—¶åšäº†å“ªäº›å·¥ä½œï¼Œä¸ºä»€ä¹ˆè¯´æ˜¯æ ¸å¿ƒå¼€å‘äººå‘˜ç­‰ç­‰ã€‚æ•°æ®åº“æ–¹é¢é—®äº†ä¸‹mysqlåˆ†åº“åˆ†è¡¨ï¼Œæ€ä¹ˆåˆ†çš„ï¼Œæ°´å¹³åˆ†è¿˜æ˜¯å‚ç›´åˆ†ç­‰ç­‰ã€‚</p>
<p>ä¸è¿‡ç™¾å¿™ä¹‹ä¸­æŠ½å‡ºé‚£ä¹ˆé•¿æ—¶é—´æ¥é¢è¯•ï¼Œè¿˜æ˜¯ç›¸å½“æœ‰è€å¿ƒçš„ã€‚</p>
<p>ç¬¬äºŒå¤©æ™šä¸Šè§†é¢‘é¢è¯•ï¼Œä¸¤ä½é¢è¯•å®˜çœ‹èµ·æ¥å·²ç»æœ‰ä¸€å®šå¹´çºªäº†ï¼Œé¦–å…ˆæ˜¯ä¸€æ®µè›‹ç–¼çš„è‡ªæˆ‘ä»‹ç»ï¼ˆè¿™ä¸ªçœŸæ²¡æœ‰å‡†å¤‡),<br>ç„¶åä¼šé—®äº†ä¸€ç‚¹ä¸œè¥¿ï¼Œæ¯”å¦‚ä½ ä»¥å‰å…¬å¸çš„äººæ•°å’Œå¼€å‘å›¢é˜Ÿæ¶æ„ï¼Œä»¥å‰çš„å¼€å‘æµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Œæ–‡æ¡£å†™çš„æ€ä¹ˆæ ·ï¼Œ<br>UMLç”¨çš„æ€ä¹ˆæ ·ï¼Œä½ è§‰å¾—ä½ è¿™äº›é¡¹ç›®ä¸­åšçš„æœ€å¥½çš„æ˜¯å“ªäº›ï¼Œå¹³å¸¸éƒ½ç”¨å“ªäº›è®¾è®¡æ¨¡å¼ä¹‹ç±»çš„ï¼Œä»è¿™ä¸€ç‚¹çœ‹å‡ºï¼Œè¿™ç­‰<br>è§„æ¨¡çš„å…¬å¸ï¼Œå³ä½¿æ˜¯äº’è”ç½‘å…¬å¸ï¼Œå¼€å‘æ—¶ä¹Ÿæ˜¯å°½é‡æŒ‰ç…§æ­£å¸¸çš„å¼€å‘æµç¨‹èµ°çš„ï¼Œä¸ä¼šä¸ºäº†æ•æ·è€Œæ”¾å¼ƒå…¶ä»–çš„ä¸œè¥¿ã€‚</p>
<p>ä¸¤æ˜ŸæœŸä¹‹å†…ç»™ç»“æœï¼Œæœ€åé˜¿é‡Œè¿˜å‘ä¸ªçŸ­ä¿¡è®©æˆ‘ç»™é¢è¯•ä¸€ä¸ªè¯„ä»·ï¼Œå¥½å§ï¼Œæµ“æµ“çš„æ·˜å®é£æ ¼ã€‚</p>
]]></content>
    
    
  </entry>
  
  <entry>
    <title><![CDATA[jsonpä½¿ç”¨]]></title>
    <link href="http://stackbox.org/2014/06/jsonp-usage/"/>
    <id>http://stackbox.org/2014/06/jsonp-usage/</id>
    <published>2014-06-21T09:16:00.000Z</published>
    <updated>2015-02-27T16:31:13.000Z</updated>
    <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œéœ€è¦æ˜ç¡®è®°ä½çš„æ˜¯ï¼Œjsonpä¸æ˜¯ajaxçš„ä¸€ç§ç‰¹ä¾‹ï¼Œè€Œæ˜¯ä½¿ç”¨åŠ¨æ€scriptæ¥è·å–æ•°æ®çš„ä¸€ç§æ–¹å¼ã€‚</p>
<h2 id="åŸç†">åŸç†</h2>
<p>ç”±äº<a href="http://baike.baidu.com/link?url=LEaAmZN5IYfQA1MwEnUm8eIgio8sTU9lRdsvwtJKKHIuGFYxKRtOOXumMICnUHFHLyQk5kLzfyXzTm_ERmJkfK" target="_blank" rel="external">åŒæºç­–ç•¥</a>,ä¸€èˆ¬æ¥è¯´ä½äº server1.example.comçš„ç½‘é¡µæ— æ³•ä¸ä¸æ˜¯ server1.example.com çš„æœåŠ¡å™¨æ²Ÿé€šï¼Œ è€Œ HTMLçš„ <code>&lt;script&gt;</code> å…ƒç´ æ˜¯ä¸ªä¾‹å¤–,åˆ©ç”¨è¿™ä¸ªç­–ç•¥ï¼Œå¯ä»¥å®ç°è·¨åŸŸè·å–æ•°æ®çš„åŠŸèƒ½ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦æ„å»ºä¸€ä¸ª<code>&lt;script&gt;</code>å…ƒç´ ï¼Œç„¶åå°† <code>src</code> å±æ€§èµ‹å€¼æˆæˆ‘ä»¬è¯·æ±‚èµ„æ–™çš„åœ°å€å³å¯ï¼ˆå‚æ•°é€‚ç”¨getæ–¹å¼è¿›è¡Œæ‹¼æ¥ï¼‰ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span> </div><div class="line">	src=<span class="string">"http://server2.example.com/userlist?userId=1823&callback=sayHello"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span></div></pre></td></tr></table></figure>



<p>æµè§ˆå™¨è¯·æ±‚è¿™ä¸ªèµ„æºï¼ŒæœåŠ¡å™¨ç«¯è¿›è¡Œä¸€äº›ç‰¹æ®Šçš„å¤„ç†,ç»™æµè§ˆå™¨è¿”å›å¦‚ä¸‹æ‰€ç¤ºçš„èµ„æºã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sayHello({</div><div class="line">	<span class="string">'userId'</span> : <span class="number">1823</span>,</div><div class="line">	<span class="string">'name'</span> : <span class="string">'stackbox'</span></div><div class="line">})</div></pre></td></tr></table></figure>

<p>å³å…¨å±€è¿è¡Œäº†ä¸€ä¸ªsayHelloå‡½æ•°ï¼Œå‚æ•°ä¸ºè·å–çš„jsonæ•°æ®ã€‚</p>
<p>jQueryå†…ç½®æä¾›çš„jsonpåŠŸèƒ½,æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">jQuery.getJSON(url+<span class="string">"&callback=?"</span>, <span class="function"><span class="keyword">function</span><span class="params">(data)</span> </span>{</div><div class="line">    alert(<span class="string">"Symbol: "</span> + data.symbol + <span class="string">", Price: "</span> + data.price);</div><div class="line">});</div></pre></td></tr></table></figure>

<p>æ­¤æ—¶jQueryä¼šç”Ÿæˆä¸€ä¸ªå‘½åéšæœºçš„callbackæ–¹æ³•ï¼Œ æ¯”å¦‚ <strong>jQuery18308848262811079621_1393981029347</strong>ï¼Œç„¶åä¼š<br>å°†è¿™ä¸ªå‡½æ•°é™„åŠ åˆ°å…¨å±€windowï¼Œè¿™æ ·è¿”å›èµ„æºçš„æ—¶å€™å°±èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°äº†ã€‚</p>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå·±çš„callbackåï¼Œæ¯”å¦‚:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$.ajax({</div><div class="line">       url:<span class="string">"http://localhost:20002/MyService.ashx?callback=?"</span>,   </div><div class="line">       dataType:<span class="string">"jsonp"</span>,</div><div class="line">       jsonpCallback:<span class="string">"person"</span>,</div><div class="line">       success:<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>{</div><div class="line">           alert(data.name + <span class="string">" is a a"</span> + data.sex);</div><div class="line">       }</div><div class="line">  });</div></pre></td></tr></table></figure>

<p>é™¤äº†ä½¿ç”¨ <a href="http://api.jquery.com/jquery.ajax/" target="_blank" rel="external">$.ajax</a>,ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="http://www.w3schools.com/Jquery/ajax_ajaxsetup.asp" target="_blank" rel="external">$.ajaxSetup</a>å¯¹è¯·æ±‚è¿›è¡Œè®¾ç½®ã€‚</p>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<h2 id="å¤‡æ³¨">å¤‡æ³¨</h2>
<p>JSONPæ˜¯ä¸€ä¸ªéæ ‡å‡†çš„è§„èŒƒï¼Œå…¶ä¼˜ç‚¹åœ¨äºæµè§ˆå™¨å…¼å®¹æ€§ï¼Œè€Œä¸”ç”±äºå‘å±•<br>çš„æ¯”è¾ƒæ—©ç›®å‰æœ‰å¤§é‡åŸºäºJSONPçš„api(Yahoo,Twitter, etc) å’Œåº“(jQUery, YUI)<br>å®ƒçš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p>
<ol>
<li>ä½¿å¾—resté£æ ¼çš„apiä¸å†é‚£ä¹ˆä¼˜é›…</li>
<li>å®‰å…¨é—®é¢˜</li>
<li>ä¸è·¨åŸŸçš„æ¥å£äº¤äº’å›°éš¾ï¼Œæ— æ³•postï¼Œæ— æ³•ç›´æ¥ç»™æ¥å£ä¼ ä¸€ä¸ªjson(è™½ç„¶å¯ä»¥URLEncodeæˆä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯æ¯”è¾ƒä¸‘é™‹)</li>
<li>è°ƒè¯•å¤æ‚ï¼Œå…·ä½“å‚è§ <a href="http://johnnywey.wordpress.com/2012/05/20/jsonp-how-does-it-work/" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a></li>
</ol>
<p>è€Œä¸”ï¼Œè§£å†³è·¨åŸŸé—®é¢˜çš„æ–¹å¼ä¸æ­¢æœ‰JSONPè¿™ä¸€ç§ï¼Œè¿˜æœ‰ <a href="http://zh.wikipedia.org/wiki/%E8%B7%A8%E4%BE%86%E6%BA%90%E8%B3%87%E6%BA%90%E5%85%B1%E4%BA%AB" target="_blank" rel="external">Cross-Origin Resource Sharing (CORS)</a> å’Œ Proxyä¸¤ç§ã€‚</p>
<ul>
<li>CORSçš„å…³é”®åœ¨äº: XMLHttpRequest åœ¨Level 2æ—¶æ–°å¢äº†è·¨åŸŸè®¿é—®çš„åŠŸèƒ½ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨ç«¯è®¾ç½®ä¸€äº›ç‰¹æ®Šheaderï¼Œå…¼å®¹æ€§ä½ æ‡‚å¾—ã€‚</li>
<li>Proxyæ–¹å¼å°±æ˜¯ï¼š ä½¿ç”¨apache/Nginxå°†å¦å¤–ä¸€ä¸ªsiteçš„æ¥å£æ˜ å°„åˆ°åŒæºçš„URLä¸‹ï¼Œç®€å•æš´åŠ›ã€‚ç¼ºç‚¹åœ¨äºæ¯æ¬¡æ–°çš„apiéƒ½è¦ä¿®æ”¹proxyçš„é…ç½®ã€‚</li>
</ul>
<h2 id="åè®°">åè®°</h2>
<p>èµ„æ–™æ¥æºï¼š</p>
<ol>
<li><a href="http://zh.wikipedia.org/wiki/JSONP" target="_blank" rel="external">http://zh.wikipedia.org/wiki/JSONP</a></li>
<li><a href="http://blog.csdn.net/patern_pan/article/details/7588755" target="_blank" rel="external">http://blog.csdn.net/patern_pan/article/details/7588755</a></li>
<li><a href="http://forum.jquery.com/topic/jsonp-and-randomly-generated-callback-function" target="_blank" rel="external">http://forum.jquery.com/topic/jsonp-and-randomly-generated-callback-function</a></li>
<li><a href="http://stackoverflow.com/questions/22186703/modifying-jquery-jsonp-callback-function" target="_blank" rel="external">http://stackoverflow.com/questions/22186703/modifying-jquery-jsonp-callback-function</a></li>
<li><a href="http://johnnywey.wordpress.com/2012/05/20/jsonp-how-does-it-work/" target="_blank" rel="external">http://johnnywey.wordpress.com/2012/05/20/jsonp-how-does-it-work/</a></li>
</ol>
<p>PS:ä»Šå¤©åœ¨å’ŒGRç«¥é‹è°ˆè®ºæ ¡é•¿çš„ <a href="http://book.douban.com/subject/24335672/" target="_blank" rel="external">ã€Šæ·˜å®æŠ€æœ¯è¿™åå¹´ã€‹</a> æ—¶å€™, å‘ç°è¿™ä¹ˆä¸€ä¸ªçŸ¥è¯†ç‚¹:</p>
<blockquote>
<p>ç”Ÿæˆé¦–é¡µåï¼Œå¯¹Webå‰ç«¯ç¨å¾®æœ‰ç‚¹å¸¸è¯†çš„äººéƒ½åº”è¯¥çŸ¥é“ï¼Œæµè§ˆå™¨ä¸‹ä¸€æ­¥ä¼šåŠ è½½é¡µé¢ä¸­ç”¨åˆ°çš„CSSã€JSï¼ˆJavaScriptï¼‰ã€å›¾ç‰‡ç­‰æ ·å¼ã€è„šæœ¬å’Œèµ„æºæ–‡ä»¶ã€‚ä½†æ˜¯å¯èƒ½ç›¸å¯¹è¾ƒå°‘çš„äººæ‰ä¼šçŸ¥é“ï¼Œä½ çš„æµè§ˆå™¨åœ¨åŒä¸€ä¸ªåŸŸåä¸‹å¹¶å‘åŠ è½½çš„èµ„æºæ•°é‡æ˜¯æœ‰é™çš„ï¼Œä¾‹å¦‚IE 6å’ŒIE 7æ˜¯ä¸¤ä¸ªï¼ŒIE 8æ˜¯6ä¸ªï¼Œchromeå„ç‰ˆæœ¬ä¸å¤§ä¸€æ ·ï¼Œä¸€èˆ¬æ˜¯4ï½6ä¸ªã€‚æˆ‘åˆšåˆšçœ‹äº†ä¸€ä¸‹ï¼Œæˆ‘è®¿é—®æ·˜å®ç½‘é¦–é¡µéœ€è¦åŠ è½½126ä¸ªèµ„æºï¼Œé‚£ä¹ˆå¦‚æ­¤å°çš„å¹¶å‘è¿æ¥æ•°è‡ªç„¶ä¼šåŠ è½½å¾ˆä¹…ã€‚</p>
</blockquote>
<p>å¥½äº†ï¼Œå°±åˆ°è¿™é‡Œäº†ã€‚</p>
]]></content>
    
    
      <category term="å‰ç«¯" scheme="http://stackbox.org/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[vagrantè™šæ‹Ÿæœºä½¿ç”¨]]></title>
    <link href="http://stackbox.org/2014/03/vagrant-using/"/>
    <id>http://stackbox.org/2014/03/vagrant-using/</id>
    <published>2014-03-28T01:46:55.000Z</published>
    <updated>2015-04-19T19:21:30.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Vagrant_è™šæ‹Ÿæœºä½¿ç”¨">Vagrant è™šæ‹Ÿæœºä½¿ç”¨</h2>
<p>vagrant æ˜¯ä¸€æ¬¾ç”¨äºåˆ›å»ºå’Œéƒ¨ç½²è™šæ‹ŸåŒ–å¼€å‘ç¯å¢ƒï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨virtualboxåšproviderçš„ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–è™šæ‹Ÿæœº,æ¯”å¦‚vmwareå’Œdocker,<br>æœ‰å›½å¤–å¤§ç‰›åšå‡ºäº†è¿™ä¸ª<a href="https://github.com/philspitler/vagrant-docker" target="_blank" rel="external">vagrant-docker</a>é¡¹ç›®,å°±æ˜¯ä½¿ç”¨dockerä½œä¸ºprovider.</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<ul>
<li>å®‰è£… <a href="http://download.virtualbox.org/virtualbox/4.3.6/VirtualBox-4.3.6-91406-Win.exe" target="_blank" rel="external">VirtualBox-4.3.6-91406-Win.exe</a> </li>
<li>å®‰è£… <a href="http://966b.http.dal05.cdn.softlayer.net/data-production/1835e881651ac8f27a9e4b815754f1934db71fe6?filename=Vagrant_1.4.3.msi" target="_blank" rel="external">Vagrant_1.4.3.msi</a></li>
</ul>
<h2 id="é…ç½®">é…ç½®</h2>
<ul>
<li><p>ä»<a href="http://www.vagrantbox.es/" target="_blank" rel="external">www.vagrantbox.es</a>â€ä¸‹è½½è™šæ‹Ÿæœºï¼Œæˆ‘ä»¬ä½¿ç”¨32ä½çš„ubuntuç‰ˆæœ¬ <a href="http://files.vagrantup.com/lucid32.box" target="_blank" rel="external">lucid32.box</a>(è¿™ä¸ªæ˜¯ubuntu10ä¸æ¨èä½¿ç”¨)</p>
</li>
<li><p>å°†boxæ–‡ä»¶æ‹·è´åˆ°è®¡ç®—æœºçš„æŸä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œmsysè¿è¡Œæ·»åŠ è™šæ‹Ÿæœºå‘½ä»¤</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vagrant box add lucid32 ./lucid32.box</div></pre></td></tr></table></figure>

<ul>
<li>åˆ›å»ºå†…å®¹å¦‚ä¸‹çš„ <code>Vagrantfile</code> æ–‡ä»¶</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div></pre></td><td class="code"><pre><div class="line">  <span class="comment"># -*- mode: ruby -*-</span></div><div class="line">  <span class="comment"># vi: set ft=ruby :</span></div><div class="line"></div><div class="line">  <span class="comment"># Vagrantfile API/syntax version. Don't touch unless you know what you're doing!</span></div><div class="line">  <span class="constant">VAGRANTFILE_API_VERSION</span> = <span class="string">"2"</span></div><div class="line"></div><div class="line">  <span class="constant">Vagrant</span>.configure(<span class="constant">VAGRANTFILE_API_VERSION</span>) <span class="keyword">do</span> |config|</div><div class="line">  <span class="comment"># All Vagrant configuration is done here. The most common configuration</span></div><div class="line">  <span class="comment"># options are documented and commented below. For a complete reference,</span></div><div class="line">  <span class="comment"># please see the online documentation at vagrantup.com.</span></div><div class="line"></div><div class="line">  <span class="comment"># Every Vagrant virtual environment requires a box to build off of.</span></div><div class="line">  config.vm.box = <span class="string">"lucid32"</span></div><div class="line"></div><div class="line">  <span class="comment"># The url from where the 'config.vm.box' box will be fetched if it</span></div><div class="line">  <span class="comment"># doesn't already exist on the user's system.</span></div><div class="line">  config.vm.box_url = <span class="string">"http://files.vagrantup.com/lucid32.box"</span></div><div class="line"></div><div class="line">  <span class="comment"># Create a forwarded port mapping which allows access to a specific port</span></div><div class="line">  <span class="comment"># within the machine from a port on the host machine. In the example below,</span></div><div class="line">  <span class="comment"># accessing "localhost:8080" will access port 80 on the guest machine.</span></div><div class="line">  <span class="comment"># config.vm.network :forwarded_port, guest: 80, host: 8080</span></div><div class="line"></div><div class="line">  <span class="comment"># Create a private network, which allows host-only access to the machine</span></div><div class="line">  <span class="comment"># using a specific IP.</span></div><div class="line">  <span class="comment"># config.vm.network :private_network, ip: "192.168.33.10"</span></div><div class="line"></div><div class="line">  <span class="comment"># Create a public network, which generally matched to bridged network.</span></div><div class="line">  <span class="comment"># Bridged networks make the machine appear as another physical device on</span></div><div class="line">  <span class="comment"># your network.</span></div><div class="line">  <span class="comment"># config.vm.network :public_network</span></div><div class="line"></div><div class="line">  <span class="comment"># If true, then any SSH connections made will enable agent forwarding.</span></div><div class="line">  <span class="comment"># Default value: false</span></div><div class="line">  <span class="comment"># config.ssh.forward_agent = true</span></div><div class="line"></div><div class="line">  <span class="comment"># Share an additional folder to the guest VM. The first argument is</span></div><div class="line">  <span class="comment"># the path on the host to the actual folder. The second argument is</span></div><div class="line">  <span class="comment"># the path on the guest to mount the folder. And the optional third</span></div><div class="line">  <span class="comment"># argument is a set of non-required options.</span></div><div class="line">  <span class="comment"># config.vm.synced_folder "../data", "/vagrant_data"</span></div><div class="line"></div><div class="line">  <span class="comment"># Provider-specific configuration so you can fine-tune various</span></div><div class="line">  <span class="comment"># backing providers for Vagrant. These expose provider-specific options.</span></div><div class="line">  <span class="comment"># Example for VirtualBox:</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># config.vm.provider :virtualbox do |vb|</span></div><div class="line">  <span class="comment">#   # Don't boot with headless mode</span></div><div class="line">  <span class="comment">#   vb.gui = true</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment">#   # Use VBoxManage to customize the VM. For example to change memory:</span></div><div class="line">  <span class="comment">#   vb.customize ["modifyvm", :id, "--memory", "1024"]</span></div><div class="line">  <span class="comment"># end</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># View the documentation for the provider you're using for more</span></div><div class="line">  <span class="comment"># information on available options.</span></div><div class="line"></div><div class="line">  <span class="comment"># Enable provisioning with Puppet stand alone.  Puppet manifests</span></div><div class="line">  <span class="comment"># are contained in a directory path relative to this Vagrantfile.</span></div><div class="line">  <span class="comment"># You will need to create the manifests directory and a manifest in</span></div><div class="line">  <span class="comment"># the file base.pp in the manifests_path directory.</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># An example Puppet manifest to provision the message of the day:</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># # group { "puppet":</span></div><div class="line">  <span class="comment"># #   ensure =&gt; "present",</span></div><div class="line">  <span class="comment"># # }</span></div><div class="line">  <span class="comment"># #</span></div><div class="line">  <span class="comment"># # File { owner =&gt; 0, group =&gt; 0, mode =&gt; 0644 }</span></div><div class="line">  <span class="comment"># #</span></div><div class="line">  <span class="comment"># # file { '/etc/motd':</span></div><div class="line">  <span class="comment"># #   content =&gt; "Welcome to your Vagrant-built virtual machine!</span></div><div class="line">  <span class="comment"># #               Managed by Puppet.\n"</span></div><div class="line">  <span class="comment"># # }</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># config.vm.provision :puppet do |puppet|</span></div><div class="line">  <span class="comment">#   puppet.manifests_path = "manifests"</span></div><div class="line">  <span class="comment">#   puppet.manifest_file  = "init.pp"</span></div><div class="line">  <span class="comment"># end</span></div><div class="line"></div><div class="line">  <span class="comment"># Enable provisioning with chef solo, specifying a cookbooks path, roles</span></div><div class="line">  <span class="comment"># path, and data_bags path (all relative to this Vagrantfile), and adding</span></div><div class="line">  <span class="comment"># some recipes and/or roles.</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># config.vm.provision :chef_solo do |chef|</span></div><div class="line">  <span class="comment">#   chef.cookbooks_path = "../my-recipes/cookbooks"</span></div><div class="line">  <span class="comment">#   chef.roles_path = "../my-recipes/roles"</span></div><div class="line">  <span class="comment">#   chef.data_bags_path = "../my-recipes/data_bags"</span></div><div class="line">  <span class="comment">#   chef.add_recipe "mysql"</span></div><div class="line">  <span class="comment">#   chef.add_role "web"</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment">#   # You may also specify custom JSON attributes:</span></div><div class="line">  <span class="comment">#   chef.json = { :mysql_password =&gt; "foo" }</span></div><div class="line">  <span class="comment"># end</span></div><div class="line"></div><div class="line">  <span class="variable">$script</span> = %<span class="constant">Q</span>{</div><div class="line">    sudo apt-get update</div><div class="line">    sudo apt-get install nasm make build-essential grub qemu zip -y</div><div class="line">  }</div><div class="line"></div><div class="line">  </div><div class="line">  config.vm.provision <span class="symbol">:shell</span>, <span class="symbol">:inline</span> =&gt; <span class="variable">$script</span></div><div class="line">  </div><div class="line"></div><div class="line">  <span class="comment"># Enable provisioning with chef server, specifying the chef server URL,</span></div><div class="line">  <span class="comment"># and the path to the validation key (relative to this Vagrantfile).</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># The Opscode Platform uses HTTPS. Substitute your organization for</span></div><div class="line">  <span class="comment"># ORGNAME in the URL and validation key.</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># If you have your own Chef Server, use the appropriate URL, which may be</span></div><div class="line">  <span class="comment"># HTTP instead of HTTPS depending on your configuration. Also change the</span></div><div class="line">  <span class="comment"># validation key to validation.pem.</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># config.vm.provision :chef_client do |chef|</span></div><div class="line">  <span class="comment">#   chef.chef_server_url = "https://api.opscode.com/organizations/ORGNAME"</span></div><div class="line">  <span class="comment">#   chef.validation_key_path = "ORGNAME-validator.pem"</span></div><div class="line">  <span class="comment"># end</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># If you're using the Opscode platform, your validator client is</span></div><div class="line">  <span class="comment"># ORGNAME-validator, replacing ORGNAME with your organization name.</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment"># If you have your own Chef Server, the default validation client name is</span></div><div class="line">  <span class="comment"># chef-validator, unless you changed the configuration.</span></div><div class="line">  <span class="comment">#</span></div><div class="line">  <span class="comment">#   chef.validation_client_name = "ORGNAME-validator"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>

<ul>
<li>è¿›å…¥Vagrantfileçš„åŒåç›®å½•</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#æŸ¥çœ‹å¸®åŠ©</span></div><div class="line">$ vagrant --help</div><div class="line"></div><div class="line"><span class="comment">#å¯åŠ¨è™šæ‹Ÿæœº</span></div><div class="line">$ vagrant up</div><div class="line"></div><div class="line"><span class="comment">#å…³é—­è™šæ‹Ÿæœº</span></div><div class="line">$ vagrant halt</div><div class="line"></div><div class="line"><span class="comment">#sshè¿æ¥</span></div><div class="line">$ vagrant ssh</div><div class="line"></div><div class="line"><span class="comment">#æ˜¾ç¤ºaddçš„æ‰€æœ‰box</span></div><div class="line">$ vagrant box list</div><div class="line"></div><div class="line"><span class="comment">#remove box,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯boxçš„åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯providerçš„åç§°</span></div><div class="line">$ vagrant box remove precise64 virtualbox</div><div class="line"></div><div class="line"><span class="comment">#æ‘§æ¯ä¸€ä¸ªvmï¼Œ(åœ¨VagrantFileç›¸åŒæ–‡ä»¶å¤¹ä¸‹)ï¼Œæ³¨æ„ä¸ vagrant box removeçš„ä¸åŒ</span></div><div class="line">$ vagrant destroy</div><div class="line"></div><div class="line"><span class="comment">#ä¹Ÿå¯ä»¥é€šè¿‡ssh-clientè¿æ¥ï¼Œç”¨æˆ·åå¯†ç éƒ½ä¸ºvagrant,ç«¯å£ä¸º2222</span></div><div class="line">$ ssh -p <span class="number">2222</span> vagrant@localhost</div></pre></td></tr></table></figure>

<h2 id="å¯¼å‡ºBox">å¯¼å‡ºBox</h2>
<ul>
<li>æ­¥éª¤<ol>
<li>cd into the directory with your <strong>Vagrantile</strong></li>
<li>run <code>vagrant package</code>Â· This will export a box file called package.box by default</li>
<li>run <code>vagrant box add foo package.box</code> virtualbox to add package.box to your existing boxes. (Assuming you are using virtualbox and not VMWare)</li>
<li>run <code>vagrant box list</code> to verify it was added.</li>
</ol>
</li>
</ul>
<p> Now you can just create a new folder, run vagrant init as normal and set your box to the following:<code>config.vm.box = &quot;foo&quot;</code>,The new VM will spin up with the exact data that was present in the previous VM.</p>
<h2 id="æ—¶é—´åŒæ­¥">æ—¶é—´åŒæ­¥</h2>
<p>æŠŠ<code>virtualbox/bin</code>åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œè¿è¡Œä¸€ä¸‹å‘½ä»¤ï¼Œè®¾ç½®æ—¶é—´åŒæ­¥ï¼ˆwinä¸‹ä¹Ÿå¯ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#List vms</span></div><div class="line">$ VBoxManage list vms</div><div class="line"> </div><div class="line"><span class="comment">#get status of time sync</span></div><div class="line">$ VBoxManage getextradata &lt;vm-name&gt; VBoxInternal/Devices/VMMDev/<span class="number">0</span>/Config/GetHostTimeDisabled </div><div class="line"> </div><div class="line"><span class="comment">#NOTE: Make sure to restart the VM after changing these settings.</span></div><div class="line"> </div><div class="line"><span class="comment">#disable time sync</span></div><div class="line">$ VBoxManage setextradata &lt;vm-name&gt; VBoxInternal/Devices/VMMDev/<span class="number">0</span>/Config/GetHostTimeDisabled <span class="number">1</span></div><div class="line"> </div><div class="line"><span class="comment">#enable time sync</span></div><div class="line">$ VBoxManage setextradata &lt;vm-name&gt; VBoxInternal/Devices/VMMDev/<span class="number">0</span>/Config/GetHostTimeDisabled <span class="number">0</span></div></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<ul>
<li>ç½‘ç»œé…ç½®<ol>
<li>è¾ƒä¸ºå¸¸ç”¨æ˜¯ç«¯å£æ˜ å°„ï¼Œå°±æ˜¯å°†è™šæ‹Ÿæœºä¸­çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºå¯¹åº”çš„ç«¯å£ç›´æ¥ä½¿ç”¨ ï¼Œåœ¨Vagrantfileä¸­é…ç½®ï¼š<code>config.vm.network :forwarded_port, guest: 80, host: 8080</code>,guest: 80 è¡¨ç¤ºè™šæ‹Ÿæœºä¸­çš„80ç«¯å£ï¼Œ host: 8080 è¡¨ç¤ºæ˜ å°„åˆ°å®¿ä¸»æœºçš„8080ç«¯å£</li>
<li>å¦‚æœéœ€è¦è‡ªå·±è‡ªç”±çš„è®¿é—®è™šæ‹Ÿæœºï¼Œä½†æ˜¯åˆ«äººä¸éœ€è¦è®¿é—®è™šæ‹Ÿæœºï¼Œ ï¼Œåœ¨Vagrantfileä¸­é…ç½®ï¼š<code>config.vm.network :private_network, ip: &quot;192.168.1.104&quot;</code>,192.168.1.104è¡¨ç¤ºè™šæ‹Ÿæœºçš„IPï¼Œå¤šå°è™šæ‹Ÿæœºçš„è¯éœ€è¦äº’ç›¸è®¿é—®çš„è¯ï¼Œè®¾ç½®åœ¨ç›¸åŒç½‘æ®µå³å¯</li>
<li>å¦‚æœéœ€è¦å°†è™šæ‹Ÿæœºä½œä¸ºå½“å‰å±€åŸŸç½‘ä¸­çš„ä¸€å°è®¡ç®—æœºï¼Œç”±å±€åŸŸç½‘è¿›è¡ŒDHCPï¼Œé‚£ä¹ˆåœ¨Vagrantfileä¸­é…ç½®ï¼š<code>config.vm.network :public_network</code></li>
</ol>
</li>
</ul>
<ul>
<li><p>ç›®å½•æ˜ å°„</p>
<p>è™šæ‹Ÿæœºåˆå§‹åŒ–å¯åŠ¨æ—¶ï¼Œ hostçš„å½“å‰å·¥ä½œç›®å½•å°±ä¼šæ˜ å°„åˆ° guestçš„ <code>/vagrant</code> æ–‡ä»¶å¤¹ä¸‹</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡VagrantFile <code>config.vm.synced_folder &quot;wwwroot/&quot;, &quot;/var/www&quot;</code> å®Œæˆæ˜ å°„é…ç½®</p>
</li>
</ul>
]]></content>
    
    
      <category term="å·¥å…·" scheme="http://stackbox.org/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
